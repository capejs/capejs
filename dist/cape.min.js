!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Cape=e()}}(function(){return function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return r(n?n:e)},h,h.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";var i=e("./cape/utilities");i.MarkupBuilder=e("./cape/markup_builder"),i.VirtualForms=e("./cape/virtual_forms"),i.Component=e("./cape/component.js"),i.DataStore=e("./cape/data_store.js"),i.AgentAdapters={},i.AgentAdapters.RailsAdapter=e("./cape/agent_adapters/rails_adapter.js"),i.ResourceAgent=e("./cape/resource_agent.js"),i.CollectionAgent=e("./cape/collection_agent.js"),i.RoutingMapper=e("./cape/routing_mapper.js"),i.Router=e("./cape/router.js"),i.defaultAgentAdapter=void 0,t.exports=i},{"./cape/agent_adapters/rails_adapter.js":2,"./cape/collection_agent.js":3,"./cape/component.js":4,"./cape/data_store.js":5,"./cape/markup_builder":6,"./cape/resource_agent.js":10,"./cape/router.js":11,"./cape/routing_mapper.js":12,"./cape/utilities":13,"./cape/virtual_forms":14}],2:[function(e,t,n){"use strict";function i(e,t,n){for(var i=document.getElementsByTagName("meta"),r=i.length-1;r>=0;r--)if("csrf-token"===i[r].getAttribute("name")){this.headers["X-CSRF-Token"]=i[r].getAttribute("content");break}}t.exports=i},{}],3:[function(e,t,n){"use strict";var i=e("inflected"),r=e("./utilities"),s=function(e,t){this._=new a(this),this.init(t),this.client=e,this.objects=[],this.data=void 0,this.headers={"Content-Type":"application/json"}};r.extend(s.prototype,{init:function(e){e=e||{},this.resourceName=e.resourceName,this.basePath=e.basePath,this.nestedIn=e.nestedIn,this.adapter=e.adapter,this.autoRefresh=e.autoRefresh,void 0===this.autoRefresh&&(this.autoRefresh=!0),this.dataType=e.dataType,this.paramName=e.paramName},refresh:function(){var e=this;this.index(this.paramsForRefresh(),function(t){e.data=t,e.refreshObjects(t),e.afterRefresh()})},paramsForRefresh:function(){return{}},refreshObjects:function(e){var t=this.paramName||i.tableize(this.resourceName);if(this.objects.length=0,"object"==typeof e&&Array.isArray(e[t]))for(var n=0;n<e[t].length;n++)this.objects.push(e[t][n])},afterRefresh:function(){this.client.refresh()},index:function(e,t,n){this.get("",null,e,t,n)},create:function(e,t,n){this.post("",null,e,t,n)},update:function(e,t,n,i){this.patch("",e,t,n,i)},destroy:function(e,t,n){this["delete"]("",e,{},t,n)},get:function(e,t,n,i,r){var s=t?this.memberPath(t):this.collectionPath();""!==e&&(s=s+"/"+e),this.ajax("GET",s,n,i,r)},head:function(e,t,n,i,r){var s=t?this.memberPath(t):this.collectionPath();""!==e&&(s=s+"/"+e),this.ajax("HEAD",s,n,i,r)},post:function(e,t,n,i,r){var s=t?this.memberPath(t):this.collectionPath();""!==e&&(s=s+"/"+e),this.ajax("POST",s,n,i,r)},patch:function(e,t,n,i,r){var s=t?this.memberPath(t):this.collectionPath();""!==e&&(s=s+"/"+e),this.ajax("PATCH",s,n,i,r)},put:function(e,t,n,i,r){var s=t?this.memberPath(t):this.collectionPath();""!==e&&(s=s+"/"+e),this.ajax("PUT",s,n,i,r)},"delete":function(e,t,n,i,r){var s=t?this.memberPath(t):this.collectionPath();""!==e&&(s=s+"/"+e),this.ajax("DELETE",s,n,i,r)},collectionPath:function(){var e=i.pluralize(i.underscore(this.resourceName));return this._.pathPrefix()+e},memberPath:function(e){var t=i.pluralize(i.underscore(this.resourceName));return this._.pathPrefix()+t+"/"+e},defaultErrorHandler:function(e){console.log(e)}});var o=e("./mixins/agent_common_methods");r.extend(s.prototype,o);var a=function(e){this.main=e,this.components=[]},u=e("./mixins/agent_common_inner_methods");r.extend(a.prototype,u),t.exports=s},{"./mixins/agent_common_inner_methods":7,"./mixins/agent_common_methods":8,"./utilities":13,inflected:17}],4:[function(e,t,n){(function(n){"use strict";var i=e("virtual-dom"),r=(e("inflected"),e("./utilities")),s=function(){this.root=void 0,this.virtualForms=new r.VirtualForms(this),this._=new o(this)};r.extend(s.prototype,{mount:function(e){if(void 0===e)throw new Error("The first argument is missing.");if("string"!=typeof e)throw new Error("The first argument must be a string.");if(this._.mounted)throw new Error("This component has been mounted already.");this._.mounted=!0,this.root=document.getElementById(e),this.root.data=this._.getElementData(this.root),this.init?this.init():this.refresh()},unmount:function(){if(!this._.mounted)throw new Error("This component has not been mounted yet.");for(this._.mounted=!1,this.beforeUnmount&&this.beforeUnmount();this.root.firstChild;)this.root.removeChild(this.root.firstChild);this.afterUnmount&&this.afterUnmount()},refresh:function(){var e,t,r,s;e=new n.Cape.MarkupBuilder(this),this.virtualForms.prepare(),this._.tree?(t=e.markup(this.render),r=i.diff(this._.tree,t),this.root=i.patch(this.root,r),this._.tree=t):(this._.tree=e.markup(this.render),s=i.create(this._.tree),this.root.parentNode.replaceChild(s,this.root),this.root=s),this.virtualForms.apply()},val:function(e,t){return 1===arguments.length?this.virtualForms.val(e):this.virtualForms.val(e,t)},setValues:function(e,t){this.virtualForms.setValues(e,t)},formData:function(e){return this.virtualForms.formData(e)},paramsFor:function(e,t){return this.virtualForms.paramsFor(e,t)},jsonFor:function(e,t){return this.virtualForms.jsonFor(e,t)},checkedOn:function(e){return this.virtualForms.checkedOn(e)}});var o=function(e){this.main=e,this.mounted=!1};r.extend(o.prototype,{getElementData:function(e){var t,n={};return[].forEach.call(e.attributes,function(e){/^data-/.test(e.name)&&(t=e.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()}),n[t]=e.value)}),n}}),t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utilities":13,inflected:17,"virtual-dom":30}],5:[function(e,t,n){"use strict";var i=e("./utilities"),r=function(e){this.options=e||{},this._=new o(this),"function"==typeof this.init&&this.init()};r.create=function(e){return this.instance||(this.instance=new this(e)),this.instance};var s=e("./mixins/propagator_methods");i.extend(r.prototype,s);var o=function(e){this.main=e,this.components=[]};t.exports=r},{"./mixins/propagator_methods":9,"./utilities":13}],6:[function(e,t,n){(function(n){"use strict";var i=e("virtual-dom"),r=e("inflected"),s=e("./utilities"),o=function(e,t){this._=new a(this),this.component=e,t&&(this.formName=t.formName,this.selectBoxName=t.selectBoxName,this.fieldNamePrefix=t.fieldNamePrefix)};s.extend(o.prototype,{markup:function(e){var t,n,i,r=this.component.root;if("function"!=typeof e)throw new Error("The first agument must be a function.");if(0===e.length)throw new Error("Callback requires an argument.");"form"==r.tagName&&(t=r.attributes.name),n=new o(this.component,{formName:t}),e.call(this.component,n),i={};for(var s=r.attributes.length;s--;)i[r.attributes[s].nodeName]=r.attributes[s].value;return this._.h(r.tagName,i,n._.elements)},elem:function(e){var t,n,i,r,s,a;if(t=Array.prototype.slice.call(arguments,1),i=this._.extractContent(t),n=this._.extractOptions(t),r=this._.extractCallback(t)){if(s=new o(this.component,{formName:this.formName,selectBoxName:this.selectBoxName,fieldNamePrefix:this.fieldNamePrefix}),0===r.length)throw new Error("Callback requires an argument.");r.call(this.component,s),a=this._.generateAttributes(n),this._.elements.push(this._.h(e,a,s._.elements))}else i=i||"",a=this._.generateAttributes(n),this._.elements.push(this._.h(e,a,i));return this},text:function(e){return this._.elements.push(e),this},space:function(){return this._.elements.push(" "),this},sp:function(){return this.space(),this},formFor:function(e){var t,n,i,e,r,s;if(t=Array.prototype.slice.call(arguments),n=this._.extractOptions(t)||{},i=this._.extractCallback(t),"function"!=typeof i)throw new Error("One of arguments must be a function.");if(0===i.length)throw new Error("Callback requires an argument.");return r=new o(this.component,{formName:e}),i.call(this.component,r),n=n||{},n.name=e,void 0===n.onsubmit&&void 0===this._.eventCallbacks.onsubmit&&(n.onsubmit=function(e){return!1}),s=this._.generateAttributes(n),this._.elements.push(this._.h("form",s,r._.elements)),this},fieldsFor:function(e){var t,n,i,r,s;if(t=Array.prototype.slice.call(arguments,1),n=this._.extractOptions(t)||{},i=this._.extractCallback(t),"function"!=typeof i)throw new Error("One of arguments must be a function.");if(0===i.length)throw new Error("Callback requires an argument.");return r=void 0!==this.fieldNamePrefix?this.fieldNamePrefix+"/"+e:e,void 0!==n.index&&(r=r+"/"+String(n.index)),s=new o(this.component,{formName:this.formName,fieldNamePrefix:r}),i.call(this.component,s),s._.elements.forEach(function(e){this._.elements.push(e)}.bind(this)),this},labelFor:function(e,t,n){return n=n||{},n.htmlFor=this._.elementIdFor(e),this.elem("label",t,n),this},hiddenField:function(e,t){return t=t||{},t.type="hidden",t.name=e,this._.inputField(t),this},textField:function(e,t){return t=t||{},t.type=t.type||"text",t.name=e,this._.inputField(t),this},passwordField:function(e,t){return t=t||{},t.type="password",t.name=e,this._.inputField(t),this},textareaField:function(e,t){var n,i;return e&&this.fieldNamePrefix&&(e=this.fieldNamePrefix+"/"+e),t=t||{},t.name=e,n=this.formName||"",this.component.virtualForms.update(n,t),i=r.dasherize(e.replace(/\//g,"_")),t.id||(this.formName?t.id=this.formName+"-field-"+i:t.id="field-"+i),this.elem("textarea","",t),this},checkBox:function(e,t){var i;return t=t||{},t.type="checkbox",e&&(t.name=e),t.value||(t.value="1"),i=t.name&&this.fieldNamePrefix?this.fieldNamePrefix+"/"+t.name:t.name,"[]"!==e.slice(-2)&&this._.elements.push(this._.h("input",n.Cape.extend({},{name:i,type:"hidden",value:"0"}))),this._.inputField(t),this},radioButton:function(e,t,n){return n=n||{},n.type="radio",n.value=t,e&&(n.name=e),this._.inputField(n),this},selectBox:function(e){var t,n,i,r,s,a;if(t=Array.prototype.slice.call(arguments,1),n=this._.extractOptions(t)||{},i=this._.extractCallback(t),"function"!=typeof i)throw new Error("One of arguments must be a function.");if(0===i.length)throw new Error("Callback requires an argument.");return e&&this.fieldNamePrefix?n.name=this.fieldNamePrefix+"/"+e:n.name=e,n.id=n.id||this._.elementIdFor(e),r=new o(this.component,{formName:this.formName,selectBoxName:e}),i.call(this.component,r),n=n||{},s=this._.generateAttributes(n),a=this.formName||"",this.component.virtualForms.update(a,{name:e,value:n.value}),this._.elements.push(this._.h("select",s,r._.elements)),this},btn:function(){var e,t,n,i;return e=Array.prototype.slice.call(arguments),n=this._.extractContent(e),t=this._.extractOptions(e)||{},i=this._.extractCallback(e),t.type=t.type||"button",this.elem("button",n,t,i),this},attr:function(e,t){return"object"==typeof e?s.extend(this._.attr,e):"string"==typeof e&&(this._.attr[e]=t),this},"class":function(e){return"object"==typeof e?s.extend(this._.classNames,e):"string"==typeof e&&(this._.classNames[e]=!0),this},data:function(e,t){return"object"==typeof e?s.extend(this._.data,e):"string"==typeof e&&(this._.data[e]=t),this},css:function(e,t){return"object"==typeof e?s.extend(this._.style,e):"string"==typeof e&&(this._.style[e]=t),this},on:function(e,t){if("string"!=typeof e)throw new Error("The first agument must be a string.");this._.eventCallbacks["on"+e]=t},fa:function(e,t){t=t||{};var n=t["class"]||t.className;return n=n?n+" fa fa-"+e:"fa fa-"+e,t["class"]=n,this.i("",t),this}});var a=function(e){this.main=e,this.h=i.h,this.elements=[],this.classNames={},this.attr={},this.data={},this.style={},this.eventCallbacks={}};s.extend(a.prototype,{inputField:function(e){var t,n;return e=e||{},void 0===e.id&&(e.id=this.elementIdFor(e.name),"radio"===e.type&&(e.id=e.id+"-"+String(e.value))),null===e.id&&delete e.id,e.name&&this.main.fieldNamePrefix&&(e.name=this.main.fieldNamePrefix+"/"+e.name),n=this.main.formName||"",this.main.component.virtualForms.update(n,e),t=this.generateAttributes(e),this.elements.push(this.h("input",t)),this},elementIdFor:function(e){var t;return t=this.main.fieldNamePrefix?r.dasherize(this.main.fieldNamePrefix.replace(/\//g,"-")+"-"+e):r.dasherize(e),this.main.formName?this.main.formName+"-field-"+t:"field-"+t},extractContent:function(e){return"string"==typeof e[0]?e[0]:void 0},extractOptions:function(e){for(var t=0;t<e.length;t++)if("object"==typeof e[t])return e[t]},extractCallback:function(e){for(var t=0;t<e.length;t++)if("function"==typeof e[t])return e[t]},generateAttributes:function(e){var t,i;e=e||{},e=n.Cape.extend({},this.attr,e),this.attr={},"visible"in e&&!e.visible&&(e.style=e.style||{},e.style.display="none"),"class"in e&&(e.className=e["class"],delete e["class"]),"for"in e&&(e.htmlFor=e["for"],delete e["for"]),t=[];for(o in this.classNames)this.classNames.hasOwnProperty(o)&&this.classNames[o]&&t.push(o);if(this.classNames=[],"object"==typeof e.className)for(var r in e.className)e.className[r]&&t.push(r);else"string"==typeof e.className&&e.className.split(" ").forEach(function(e){t.push(e)});t.length?(t=t.filter(function(e,t,n){return n.indexOf(e)===t}),e.className=t.join(" ")):delete e.className,"data"in e&&(e.dataset=e.data,delete e.data),i=e.dataset||{},i=n.Cape.extend({},this.data,i),this.data={},e.dataset=i,"object"==typeof e.style?e.style=n.Cape.extend({},this.style,e.style):e.style=this.style,this.style={},s.merge(e,this.eventCallbacks),this.eventCallbacks={};for(var o in e)"function"==typeof e[o]&&(e[o]=e[o].bind(this.main.component));return e}});for(var u=["a","abbr","address","article","aside","audio","b","bdi","bdo","blockquote","body","button","canvas","caption","cite","code","colgroup","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","html","i","iframe","ins","kbd","label","legend","li","main","map","mark","menu","menuitem","meter","nav","noscript","object","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","var","video"],c=u.length;c--;){var h=u[c];o.prototype[h]=new Function("arg1","arg2","this.elem('"+h+"', arg1, arg2); return this")}for(var l=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],c=l.length;c--;){var h=l[c];o.prototype[h]=new Function("options","this.elem('"+h+"', options); return this")}for(var p=["checked","disabled"],c=p.length;c--;){var f=p[c];o.prototype[f]=new Function("value","this.attr('"+f+"', value); return this")}for(var m=["blur","focus","change","select","submit","reset","abort","error","load","unload","click","dblclick","keyup","keydown","keypress","mouseout","mouseover","mouseup","mousedown","mousemove"],c=m.length;c--;){var d=m[c];o.prototype["on"+d]=new Function("callback","this.on('"+d+"', callback); return this")}t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utilities":13,inflected:17,"virtual-dom":30}],7:[function(e,t,n){"use strict";var i=e("inflected"),r={applyAdapter:function(){var e,t;e=this.main.adapter||Cape.defaultAgentAdapter,"string"==typeof e&&(t=Cape.AgentAdapters[i.camelize(e)+"Adapter"],"function"==typeof t&&t.apply(this.main,arguments))},headers:function(){var e=this.main.headers;if(void 0===this.main.dataType)e.Accept="application/json, text/plain";else if("json"===this.main.dataType)e.Accept="application/json";else{if("text"!==this.main.dataType)throw new Error("Unsupported data type: "+this.main.dataType);e.Accept="text/plain"}return e},pathPrefix:function(){var e=this.main.basePath||"/";return this.main.nestedIn&&(e+=this.main.nestedIn),e},responseHandler:function(){if(void 0===this.main.dataType)return function(e){return e.text()};if("json"===this.main.dataType)return function(e){return e.json()};if("text"===this.main.dataType)return function(e){return e.text()};throw new Error("Unsupported data type: "+this.main.dataType)},dataHandler:function(e,t){if(void 0===this.main.dataType)try{this.main.data=JSON.parse(e)}catch(n){this.main.data=e}else this.main.data=e;"function"==typeof t&&t.call(this.main.client,this.main.data)}};t.exports=r},{inflected:17}],8:[function(e,t,n){"use strict";var i=(e("inflected"),{ajax:function(e,t,n,i,r){var s,o,a=this;if(n=n||{},r=r||this.defaultErrorHandler,this._.applyAdapter(),s="GET"===e||"HEAD"===e,o={method:e,headers:this._.headers(),credentials:"same-origin"},s){var u=[];for(var c in n)u.push(encodeURIComponent(c)+"="+encodeURIComponent(n[c]));u.length&&(t=t+"?"+u.join("&"))}else o.body=JSON.stringify(n);return fetch(t,o).then(this._.responseHandler()).then(function(e){a._.dataHandler(e,i),a.autoRefresh&&!s&&a.refresh()})["catch"](r),!1}});t.exports=i},{inflected:17}],9:[function(e,t,n){"use strict";var i={attach:function(e){for(var t=0,n=this._.components.length;n>t;t++)if(this._.components[t]===e)return;this._.components.push(e)},detach:function(e){for(var t=0,n=this._.components.length;n>t;t++)if(this._.components[t]===e){this._.components.splice(t,1);break}},propagate:function(){for(var e=this._.components.length;e--;)this._.components[e].refresh()}};t.exports=i},{}],10:[function(e,t,n){"use strict";function i(e,t){t=t||{},this._=new a(this),this.resourceName=t.resourceName,this.client=e,this.basePath=t.basePath,this.nestedIn=t.nestedIn,this.adapter=t.adapter,this.autoRefresh=t.autoRefresh||!1,this.dataType=t.dataType,this.singular=t.singular||!1,this.formName=t.formName,this.paramName=t.paramName,this.object=void 0,this.data=void 0,this.errors={},this.headers={"Content-Type":"application/json"}}var r=e("inflected"),s=e("./utilities");s.extend(i.prototype,{init:function(e,t){var n,i=this;n=this.singular?this.singularPath():this.client.id?this.memberPath():this.newPath(),t=t||this.defaultErrorHandler,this._.applyAdapter(),fetch(n,{headers:this._.headers(),credentials:"same-origin"}).then(this._.responseHandler()).then(function(t){i._.initialDataHandler(t,e)})["catch"](t)},create:function(e,t){var n=this.singular?this.singularPath():this.collectionPath(),i=this.client.paramsFor(this.formName||this.resourceName,{as:this.paramName||this.resourceName});return this.ajax("POST",n,i,e,t),!1},update:function(e,t){var n=this.singular?this.singularPath():this.memberPath(),i=this.client.paramsFor(this.formName||this.resourceName,{as:this.paramName||this.resourceName});return this.ajax("PATCH",n,i,e,t),!1},destroy:function(e,t){var n=this.singular?this.singularPath():this.memberPath();return this.ajax("DELETE",n,{},e,t),!1},get:function(e,t,n,i){var r=this.requestPath();""!==e&&(r=r+"/"+e),this.ajax("GET",r,t,n,i)},head:function(e,t,n,i){var r=this.requestPath();""!==e&&(r=r+"/"+e),this.ajax("HEAD",r,t,n,i)},post:function(e,t,n,i){var r=this.requestPath();""!==e&&(r=r+"/"+e),this.ajax("POST",r,t,n,i)},patch:function(e,t,n,i){var r=this.requestPath();""!==e&&(r=r+"/"+e),this.ajax("PATCH",r,t,n,i)},put:function(e,t,n,i){var r=this.requestPath();""!==e&&(r=r+"/"+e),this.ajax("PUT",r,t,n,i)},"delete":function(e,t,n,i){var r=this.requestPath();""!==e&&(r=r+"/"+e),this.ajax("DELETE",r,t,n,i)},requestPath:function(){return this.singluar?this.singularPath():void 0===this.client.id?this.collectionPath():this.memberPath()},collectionPath:function(){var e=r.pluralize(r.underscore(this.resourceName));return this._.pathPrefix()+e},newPath:function(){var e=r.pluralize(r.underscore(this.resourceName));return this._.pathPrefix()+e+"/new"},memberPath:function(){var e=r.pluralize(r.underscore(this.resourceName));return this._.pathPrefix()+e+"/"+this.client.id},singularPath:function(){var e=r.underscore(this.resourceName);return this._.pathPrefix()+e},defaultErrorHandler:function(e){console.log(e)}});var o=e("./mixins/agent_common_methods");s.extend(i.prototype,o);var a=function(e){this.main=e},u=e("./mixins/agent_common_inner_methods");s.extend(a.prototype,u),s.extend(a.prototype,{initialDataHandler:function(e,t){var n=this.main.formName||this.main.resourceName,i=this.main.paramName||this.main.resourceName;try{this.main.data=JSON.parse(e),this.main.object=this.main.data[i]||{}}catch(r){console.log("Could not parse the response data as JSON."),this.main.data=e}"function"==typeof t?t.call(this.main.client,this.main):this.main.object&&(this.main.client.setValues(n,this.main.object),this.main.client.refresh())}}),t.exports=i},{"./mixins/agent_common_inner_methods":7,"./mixins/agent_common_methods":8,"./utilities":13,inflected:17}],11:[function(e,t,n){(function(n){"use strict";var i=e("inflected"),r=e("./utilities"),s=function(e){this._=new o(this),this.rootContainer=e||window,this.routes=[],this.params={},this.query={},this.vars={},this.flash={},this.namespace=null,this.resource=null,this.action=null,this.container=null,this.component=null};r.extend(s.prototype,{draw:function(e){var t;if("function"!=typeof e)throw new Error("The last argument must be a function.");if(0===e.length)throw new Error("Callback requires an argument.");t=new n.Cape.RoutingMapper(this),e(t)},mount:function(e){this._.targetElementId=e},start:function(){var e=this;window.addEventListener?window.addEventListener("hashchange",e._.eventListener,!1):window.attachEvent&&window.attachEvent("onhashchange",e._.eventListener),this.currentHash=window.location.href.split("#")[1]||"",this.navigate(this.currentHash)},stop:function(){var e=this;window.removeEventListener?window.removeEventListener("hashchange",e._.eventListener,!1):window.detachEvent&&window.detachEvent("onhashchange",e._.eventListener)},routeFor:function(e){var t,n,i;for(t=0,n=this.routes.length;n>t;t++)if(i=this.routes[t],e.match(i.regexp))return i;throw new Error("No route match. ["+e+"]")},navigate:function(e,t){var n,i,r,s,o=this;if(this._.currentHash=e,this._.setHash(e),t=t||{},this.flash.notice=t.notice,this.flash.alert=t.alert,this._.beforeNavigationCallbacks.length){for(n=[],i=new Promise(function(t,n){t(e)}),n.push(i),r=0,s=this._.beforeNavigationCallbacks.length;s>r;r++)i=i.then(this._.beforeNavigationCallbacks[r]),n.push(i);Promise.all(n).then(function(e){o._.mountComponent(e.pop())},o._.errorHandler)}else o._.mountComponent(e)},redirectTo:function(e,t){var n=this;this._.currentHash=e,this._.setHash(e),t=t||{},this.flash.notice=t.notice,this.flash.alert=t.alert,n._.mountComponent(e)},show:function(e){var t=new e;t.mount(this._.targetElementId),this._.mountedComponentClass=e,this._.mountedComponent=t},attach:function(e){for(var t=0,n=this._.attachedComponents.length;n>t;t++)if(this._.attachedComponents[t]===e)return;this._.attachedComponents.push(e)},detach:function(e){for(var t=0,n=this._.attachedComponents.length;n>t;t++)if(this._.attachedComponents[t]===e){this._.attachedComponents.splice(t,1);break}},beforeNavigation:function(e){this._.beforeNavigationCallbacks.push(e)},errorHandler:function(e){this._.errorHandler=e},notify:function(){var e;for(e=this._.attachedComponents.length;e--;)this._.attachedComponents[e].refresh()}});var o=function(e){var t=this;this.main=e,this.eventListener=function(){var e=window.location.href.split("#")[1]||"";e!=t.currentHash&&t.main.navigate(e)},this.beforeNavigationCallbacks=[],this.attachedComponents=[],this.currentHash=null,this.mountedComponent=null,this.targetElementId=null};r.extend(o.prototype,{mountComponent:function(e){var t,n,i;if("string"!=typeof e)throw new Error("The first argument must be a string.");t=this.main.routeFor(e),this.main.namespace=t.namespace,this.main.resource=t.resource,this.main.action=t.action,this.main.container=t.container,this.main.component=t.component,this.setParams(t),this.setQuery(t),n=this.getComponentClassFor(t),n===this.mountedComponentClass?this.main.notify():(this.mountedComponent&&this.mountedComponent.unmount(),this.main.notify(),i=new n,i.mount(this.targetElementId),this.mountedComponentClass=n,this.mountedComponent=i),this.main.flash={}},setHash:function(e){window.location.hash=e},setParams:function(e){var t=this.currentHash.match(e.regexp);this.main.params={},e.keys.forEach(function(e,n){this.main.params[e]=t[n+1]}.bind(this))},setQuery:function(e){var t,n;this.main.query={},t=this.currentHash.split("?")[1],void 0!==t&&(n=t.split("&"),n.forEach(function(e){var t=e.split("=");this.main.query[t[0]]=t[1]||""}.bind(this)))},getComponentClassFor:function(e){var t,n,r,s;for(t=[],e.container&&e.container.split(".").forEach(function(e){t.push(i.camelize(e))}),n=this.main.rootContainer,r=0;n&&r<t.length;r++)n=n[t[r]]?n[t[r]]:null;if(s=i.camelize(e.component),n&&n[s])return n[s];throw new Error("Component class "+t.concat([s]).join(".")+" is not defined.")}}),t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utilities":13,inflected:17}],12:[function(e,t,n){"use strict";function i(e,t){this._=new o(this),this.router=e,t&&(this.namespacePath=t.namespacePath,this.singular=t.singular,this.pathPrefix=t.pathPrefix,this.resourcePath=t.resourcePath,this.classNamePrefix=t.classNamePrefix,this.resourceClassName=t.resourceClassName)}var r=e("inflected"),s=e("./utilities");s.extend(i.prototype,{page:function(e,t,n,i){var r,s,o,a={};i=i||{},this.pathPrefix&&(e=this.pathPrefix+"/"+e),a.path=e,a.keys=this._.extractKeys(e),a.regexp=this._.constructRegexp(e,n),r=this.classNamePrefix?this.classNamePrefix+"."+t:t,s=r.split("."),a.component=s.pop(),a.container=s.length?s.join("."):null,a.namespace=this.namespacePath||null,o=[],this.resourcePath&&o.push(this.resourcePath),i.resource&&o.push(i.resource),o.length?a.resource=o.join("/"):a.resource=null,a.action=i.action||null,this.router.routes.push(a)},root:function(e){this.page("",e)},many:function(e){var t,n,i;t=this._.extractOptions(arguments),n=this._.extractCallback(arguments),i=this._.getResourcePath(t.path||e),this._.addPagesForPluralResource(e,i,t),this._.executeCallback(n,e,i,!1)},one:function(e){var t,n,i;t=this._.extractOptions(arguments),n=this._.extractCallback(arguments),i=this._.getResourcePath(t.path||e),this._.addPagesForSingularResource(e,i,t),this._.executeCallback(n,e,i,!0)},collection:function(){var e;if(void 0===this.resourcePath||this.singular)throw new Error("The collection method must be called within a plural resource definition.");e=Array.prototype.slice.call(arguments,0),e.forEach(function(e){this.page(this.resourcePath+"/"+e,this.resourcePath+"."+e,{},{action:e})}.bind(this))},member:function(){var e;if(void 0===this.resourcePath||this.singular)throw new Error("The member method must be called within a plural resource definition.");e=Array.prototype.slice.call(arguments,0),e.forEach(function(e){this.page(this.resourcePath+"/:id/"+e,this.resourcePath+"."+e,{id:"\\d+"},{},{action:e})}.bind(this))},"new":function(){var e;if(void 0===this.resourcePath)throw new Error("The member method must be called within a resource definition.");e=Array.prototype.slice.call(arguments,0),e.forEach(function(e){this.page(this.resourcePath+"/new/"+e,this.resourcePath+"."+e,{},{action:e})}.bind(this))},view:function(){var e;if(void 0===this.resourcePath||!this.singular)throw new Error("The view method must be called within a singular resource definition.");e=Array.prototype.slice.call(arguments,0),e.forEach(function(e){this.page(this.resourcePath+"/"+e,this.resourcePath+"."+e,{},{action:e})}.bind(this))},namespace:function(e){var t,n,r,s,o;if(t=Array.prototype.slice.call(arguments,1),n=t.pop(),r=t.pop()||{},"function"!=typeof n)throw new Error("The last argument must be a function.");if(0===n.length)throw new Error("Callback requires an argument.");o=r.path||e,s=this.namespacePath?this.namespacePath+"/"+o:o,this.pathPrefix&&(o=this.pathPrefix+"/"+o),this.classNamePrefix&&(e=this.classNamePrefix+"."+e),n(new i(this.router,{namespacePath:s,pathPrefix:o,classNamePrefix:e}))}});var o=function(e){this.main=e};s.extend(o.prototype,{extractKeys:function(e){var t,n=[];return e.split("/").forEach(function(e){(t=e.match(/^:(\w+)$/))&&n.push(t[1])}),n},constructRegexp:function(e,t){var n,i=[];return t=t||{},e.split("/").forEach(function(e){(n=e.match(/^:(\w+)$/))?t[n[1]]?i.push("("+t[n[1]]+")"):i.push("([^/]+)"):e.match(/^\w+$/)&&i.push(e)}),new RegExp("^"+i.join("/")+"(?:\\?[\\w-]+(?:=[\\w-]*)?(?:&[\\w-]+(?:=[\\w-]*)?)*)?$")},extractOptions:function(e){return"function"==typeof e[1]?{}:e[1]||{}},extractCallback:function(e){return"function"==typeof e[1]?e[1]:e[2]},filterActions:function(e,t){var n;t=t||{},"string"==typeof t.only&&(e.length=0,e.push(t.only)),Array.isArray(t.only)&&(e.length=0,t.only.forEach(function(t){e.push(t)})),"string"==typeof t.except&&(n=e.indexOf(t.except),-1!==n&&e.splice(n,1)),Array.isArray(t.except)&&t.except.forEach(function(t){n=e.indexOf(t),-1!==n&&e.splice(n,1)})},getResourcePath:function(e){return this.main.resourcePath&&(e=this.main.singular?this.main.resourcePath+"/"+e:this.main.resourcePath+"/:"+r.singularize(this.main.resourcePath)+"_id/"+e),e},addPagesForPluralResource:function(e,t,n){var i,r=["index","new","show","edit"];this.filterActions(r,n),n.pathNames=n.pathNames||{},-1!=r.indexOf("index")&&this.main.page(t,e+".list",{},{resource:e,action:"index"}),-1!=r.indexOf("new")&&(i=n.pathNames["new"]?n.pathNames["new"]:"new",this.main.page(t+"/"+i,e+".form",{},{resource:e,action:"new"})),-1!=r.indexOf("show")&&this.main.page(t+"/:id",e+".item",{id:"\\d+"},{resource:e,action:"show"}),-1!=r.indexOf("edit")&&(i=n.pathNames.edit?n.pathNames.edit:"edit",this.main.page(t+"/:id/"+i,e+".form",{id:"\\d+"},{resource:e,action:"edit"}))},addPagesForSingularResource:function(e,t,n){var i,r=["new","show","edit"];this.filterActions(r,n),n.pathNames=n.pathNames||{},-1!=r.indexOf("show")&&this.main.page(t,e+".content",{},{resource:e,action:"show"}),-1!=r.indexOf("new")&&(i=n.pathNames["new"]?n.pathNames["new"]:"new",this.main.page(t+"/"+i,e+".form",{},{resource:e,action:"new"})),-1!=r.indexOf("edit")&&(i=n.pathNames.edit?n.pathNames.edit:"edit",this.main.page(t+"/"+i,e+".form",{},{resource:e,action:"edit"}))},executeCallback:function(e,t,n,r){if("function"==typeof e){if(0===e.length)throw new Error("Callback requires an argument.");e(new i(this.main.router,{singular:r,pathPrefix:this.main.pathPrefix,resourcePath:n,classNamePrefix:this.main.classNamePrefix,resourceClassName:t}))}}}),t.exports=i},{"./utilities":13,inflected:17}],13:[function(e,t,n){(function(e){"use strict";var n={};n.extend=function(){var e,t;for(e=1;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},n.deepExtend=function(){var t,n;for(t=1;t<arguments.length;t++)for(n in arguments[t])arguments[t].hasOwnProperty(n)&&("object"==typeof arguments[0][n]&&"object"==typeof arguments[t][n]?e.Cape.deepExtend(arguments[0][n],arguments[t][n]):arguments[0][n]=arguments[t][n]);return arguments[0]},n.merge=function(){var e,t;for(e=1;e<arguments.length;e++)for(t in arguments[e])!arguments[0].hasOwnProperty(t)&&arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},n.createComponentClass=function(e){var t=function(){n.Component.apply(this,arguments),"function"==typeof e.constructor&&e.constructor.apply(this,arguments)};return n.extend(t.prototype,n.Component.prototype,e),t},n.createDataStoreClass=function(e){var t=function(){n.DataStore.apply(this,arguments),"function"==typeof e.constructor&&e.constructor.apply(this,arguments);
};return n.extend(t.prototype,n.DataStore.prototype,e),t.create=n.DataStore.create,t},n.createCollectionAgentClass=function(e){var t=function(){n.CollectionAgent.apply(this,arguments),"function"==typeof e.constructor&&e.constructor.apply(this,arguments),this._.applyAdapter()};return n.extend(t.prototype,n.CollectionAgent.prototype,e),t},n.createResourceAgentClass=function(e){var t=function(){n.ResourceAgent.apply(this,arguments),"function"==typeof e.constructor&&e.constructor.apply(this,arguments),this._.applyAdapter()};return n.extend(t.prototype,n.ResourceAgent.prototype,e),t},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){(function(n){"use strict";var i=e("./utilities"),r=function(e){this.component=e,this.items={},this._=new s(this)};i.extend(r.prototype,{prepare:function(){this._.compile(),n.Cape.deepExtend(this._.realForms,this.items),this._.tempForms=n.Cape.deepExtend({},this._.realForms)},apply:function(){var e,t,n,i,r,s,o,a,u,c,h;for(e=this.component.root.getElementsByTagName("form"),t=0,n=e.length;n>t;t++)for(i=e[t],r=i.getAttribute("name")||"",s=this._.tempForms[r]||{},a=i.getElementsByTagName("*"),o=0;o<a.length;o++)if(u=a[o],void 0!==u.value&&void 0!==u.name&&("hidden"!==u.type||!a[o+1]||"checkbox"!==a[o+1].type))if(c=u.getAttribute("name"),"checkbox"===u.type)if("[]"===c.slice(-2)&&Array.isArray(s[c])){for(u.checked=!1,h=0;h<s[c].length;h++)if(u.value===s[c][h]){u.checked=!0;break}}else u.checked=s[c]===!0||"1"===s[c];else"radio"===u.type?u.checked=u.value===s[c]:u.value!==s[c]&&(u.value=s[c]?s[c]:"");this.items={},this._.compiled=!1},update:function(e,t){var n;n=this._.tempForms[e],void 0===n&&(n=this._.tempForms[e]={}),"checkbox"===t.type?void 0===n[t.name]&&(n[t.name]=!!t.checked):"radio"===t.type&&t.checked?void 0===n[t.name]&&(n[t.name]=t.value):t.value&&void 0===n[t.name]&&(n[t.name]=t.value)},val:function(e,t){var n,i,r;if("object"!=typeof e)return 1===arguments.length?this._.getValue(e):this._.setValue(e,t);for(n in e)if(e.hasOwnProperty(n))if(r=e[n],"object"==typeof r)for(i in r)r.hasOwnProperty(i)&&this._.setValue(n+"."+i,r[i]);else this._.setValue(n,r)},setValues:function(e,t){if("string"!=typeof e)throw new Error("The first argument must be a string.");if("object"!=typeof t)throw new Error("The second argument must be an object.");this.items[e]||(this.items[e]={}),this._.setValuesOfNestedFields(e,null,t)},formData:function(e){var t,n,i,r,s,o;this._.compile(),void 0===e&&(e=""),t=this._.realForms[e]||{},n={};for(i in t)r=i.split("/"),s=r.pop(),o=n,r.forEach(function(e){o[e]||(o[e]={}),o=o[e]}),"[]"===s.slice(-2)&&(s=s.slice(0,-2)),o[s]=t[i];return n},paramsFor:function(e,t){var n,i;return t=t||{},n=t.as||e,i={},i[n]=this.formData(e),i},jsonFor:function(e,t){var n,i,r;return t=t||{},n=t.as||e,i=this.formData(e),i=this._.object2array(i),r={},r[n]=i,JSON.stringify(r)},checkedOn:function(e){var t,n,i,r,s,o,a;t=this._.getNames(e),n=t[0],i=t[1],r=this.component.root.getElementsByTagName("form");for(var u=0;u<r.length;u++){s=r[u].getElementsByTagName("input");for(var c=0;c<s.length;c++)s[c].name===i&&"checkbox"===s[c].type&&(o=s[c])}return void 0===o?void 0:(a=this._.getValue(e),"1"===a||a===!0)}});var s=function(e){this.main=e,this.realForms={},this.tempForms={},this.compiled=!1};i.extend(s.prototype,{getValue:function(e){var t,n,i;return t=this.getNames(e),n=t[0],i=t[1],n in this.main.items&&i in this.main.items[n]?this.main.items[n][i]:(this.compiled||this.compile(),n in this.realForms&&i in this.realForms[n]?this.realForms[n][i]:"")},setValue:function(e,t){var n,i,r,s;return n=this.getNames(e),i=n[0],r=n[1],s=this.getValue(e),this.main.items[i]||(this.main.items[i]={}),this.main.items[i][r]=t,s},setValuesOfNestedFields:function(e,t,n){var i,r,s;for(r in n)i=t?t+"/"+r:r,"[]"===r.slice(-2)?Array.isArray(n[r])&&(this.main.items[e][i]=n[r]):Array.isArray(n[r])?(s=this,n[r].forEach(function(t,n){s.setValuesOfNestedFields(e,i+"/"+n,t)})):"object"==typeof n[r]?this.setValuesOfNestedFields(e,i,n[r]):this.main.items[e][i]=n[r]},compile:function(){var e,t,n,i,r,s;for(this.realForms={},e=this.main.component.root.getElementsByTagName("form"),n=0;n<e.length;n++){for(t=e[n].getElementsByTagName("*"),s={},i=0;i<t.length;i++)r=t[i],r.name&&void 0!==r.value&&("checkbox"===r.type?"[]"===r.name.slice(-2)?(Array.isArray(s[r.name])||(s[r.name]=[]),r.checked&&s[r.name].push(r.value)):r.checked&&(s[r.name]=r.value):"radio"===r.type?r.checked&&(s[r.name]=r.value):s[r.name]=r.value);e[n].getAttribute("name")?this.realForms[e[n].getAttribute("name")]=s:this.realForms[""]=s}this.compiled=!0},getNames:function(e){return"string"==typeof e&&e.indexOf(".")>=0?e.split(".",2):["",e]},object2array:function(e){var t,n,r=!0,s=[];t=i.deepExtend({},e);for(n in t)0===n.length||n.match(/\D/)?(r=!1,"object"==typeof e[n]&&(e[n]=this.object2array(t[n]))):"object"==typeof e[n]?s.push(this.object2array(t[n])):s.push(e[n]);return r?s:e}}),t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utilities":13}],15:[function(e,t,n){},{}],16:[function(e,t,n){function i(){if(!a){a=!0;for(var e,t=o.length;t;){e=o,o=[];for(var n=-1;++n<t;)e[n]();t=o.length}a=!1}}function r(){}var s=t.exports={},o=[],a=!1;s.nextTick=function(e){o.push(e),a||setTimeout(i,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=r,s.addListener=r,s.once=r,s.off=r,s.removeListener=r,s.removeAllListeners=r,s.emit=r,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],17:[function(e,t,n){t.exports=e("./lib/Inflector")},{"./lib/Inflector":19}],18:[function(e,t,n){(function(n){"use strict";function i(){this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}var r=e("./hasProp"),s=e("./remove"),o=e("./icPart");i.getInstance=function(e){return n.__Inflector_Inflections=n.__Inflector_Inflections||{},n.__Inflector_Inflections[e]=n.__Inflector_Inflections[e]||new i,n.__Inflector_Inflections[e]},i.prototype.acronym=function(e){this.acronyms[e.toLowerCase()]=e;var t=[];for(var n in this.acronyms)r(this.acronyms,n)&&t.push(this.acronyms[n]);this.acronymRegex=new RegExp(t.join("|"))},i.prototype.plural=function(e,t){"string"==typeof e&&s(this.uncountables,e),s(this.uncountables,t),this.plurals.unshift([e,t])},i.prototype.singular=function(e,t){"string"==typeof e&&s(this.uncountables,e),s(this.uncountables,t),this.singulars.unshift([e,t])},i.prototype.irregular=function(e,t){s(this.uncountables,e),s(this.uncountables,t);var n=e[0],i=e.substr(1),r=t[0],a=t.substr(1);if(n.toUpperCase()===r.toUpperCase())this.plural(new RegExp("("+n+")"+i+"$","i"),"$1"+a),this.plural(new RegExp("("+r+")"+a+"$","i"),"$1"+a),this.singular(new RegExp("("+n+")"+i+"$","i"),"$1"+i),this.singular(new RegExp("("+r+")"+a+"$","i"),"$1"+i);else{var u=o(i),c=o(a);this.plural(new RegExp(n.toUpperCase()+u+"$"),r.toUpperCase()+a),this.plural(new RegExp(n.toLowerCase()+u+"$"),r.toLowerCase()+a),this.plural(new RegExp(r.toUpperCase()+c+"$"),r.toUpperCase()+a),this.plural(new RegExp(r.toLowerCase()+c+"$"),r.toLowerCase()+a),this.singular(new RegExp(n.toUpperCase()+u+"$"),n.toUpperCase()+i),this.singular(new RegExp(n.toLowerCase()+u+"$"),n.toLowerCase()+i),this.singular(new RegExp(r.toUpperCase()+c+"$"),n.toUpperCase()+i),this.singular(new RegExp(r.toLowerCase()+c+"$"),n.toLowerCase()+i)}},i.prototype.uncountable=function(){var e=Array.prototype.slice.call(arguments,0);this.uncountables=this.uncountables.concat(e)},i.prototype.human=function(e,t){this.humans.unshift([e,t])},i.prototype.clear=function(e){e=e||"all","all"===e?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[e]=[]},t.exports=i}).call(this,e("_process"))},{"./hasProp":23,"./icPart":24,"./remove":26,_process:16}],19:[function(e,t,n){"use strict";var i=e("./Inflections"),r=e("./Transliterator"),s=e("./Methods"),o=e("./defaults"),a=e("./isFunc"),u=s;u.inflections=function(e,t){return a(e)&&(t=e,e=null),e=e||"en",t?void t(i.getInstance(e)):i.getInstance(e)},u.transliterations=function(e,t){return a(e)&&(t=e,e=null),e=e||"en",t?void t(r.getInstance(e)):r.getInstance(e)};for(var c in o)u.inflections(c,o[c]);t.exports=u},{"./Inflections":18,"./Methods":20,"./Transliterator":21,"./defaults":22,"./isFunc":25}],20:[function(e,t,n){"use strict";var i={pluralize:function(e,t){return t=t||"en",this._applyInflections(e,this.inflections(t).plurals)},singularize:function(e,t){return t=t||"en",this._applyInflections(e,this.inflections(t).singulars)},camelize:function(e,t){(null===t||void 0===t)&&(t=!0);var n=""+e,i=this;return n=t?n.replace(/^[a-z\d]*/,function(e){return i.inflections().acronyms[e]||i.capitalize(e)}):n.replace(new RegExp("^(?:"+this.inflections().acronymRegex.source+"(?=\\b|[A-Z_])|\\w)"),function(e){return e.toLowerCase()}),n=n.replace(/(?:_|(\/))([a-z\d]*)/gi,function(e,t,n,r,s){return t||(t=""),""+t+(i.inflections().acronyms[n]||i.capitalize(n))})},underscore:function(e){var t=""+e;return t=t.replace(new RegExp("(?:([A-Za-z\\d])|^)("+this.inflections().acronymRegex.source+")(?=\\b|[^a-z])","g"),function(e,t,n){return""+(t||"")+(t?"_":"")+n.toLowerCase()}),t=t.replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2"),t=t.replace(/([a-z\d])([A-Z])/g,"$1_$2"),t=t.replace(/-/g,"_"),t.toLowerCase()},humanize:function(e,t){var n,i,r,s=""+e,o=this.inflections().humans,a=this;t=t||{},(null===t.capitalize||void 0===t.capitalize)&&(t.capitalize=!0);for(var u=0,c=o.length;c>u;u++)if(n=o[u],i=n[0],r=n[1],i.test&&i.test(s)||s.indexOf(i)>-1){s=s.replace(i,r);break}return s=s.replace(/_id$/,""),s=s.replace(/_/g," "),s=s.replace(/([a-z\d]*)/gi,function(e){return a.inflections().acronyms[e]||e.toLowerCase()}),t.capitalize&&(s=s.replace(/^\w/,function(e){return e.toUpperCase()})),s},capitalize:function(e){var t=null===e||void 0===e?"":String(e);return t.charAt(0).toUpperCase()+t.slice(1)},titleize:function(e){return this.humanize(this.underscore(e)).replace(/(^|[\s¿\/]+)([a-z])/g,function(e,t,n,i,r){return e.replace(n,n.toUpperCase())})},tableize:function(e){return this.pluralize(this.underscore(e))},classify:function(e){return this.camelize(this.singularize(e.replace(/.*\./g,"")))},dasherize:function(e){return e.replace(/_/g,"-")},foreignKey:function(e,t){return(null===t||void 0===t)&&(t=!0),this.underscore(e)+(t?"_id":"id")},ordinal:function(e){var t=Math.abs(Number(e)),n=t%100;if(11===n||12===n||13===n)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},ordinalize:function(e){return""+e+this.ordinal(e)},transliterate:function(e,t){t=t||{};var n=t.locale||"en",i=t.replacement||"?";return this.transliterations(n).transliterate(e,i)},parameterize:function(e,t){t=t||{},void 0===t.separator&&(t.separator="-"),null===t.separator&&(t.separator="");var n=this.transliterate(e,t);if(n=n.replace(/[^a-z0-9\-_]+/gi,t.separator),t.separator.length){var i=new RegExp(t.separator);n=n.replace(new RegExp(i.source+"{2,}"),t.separator),n=n.replace(new RegExp("^"+i.source+"|"+i.source+"$","i"),"")}return n.toLowerCase()},_applyInflections:function(e,t){var n,i,r,s=""+e;if(0===s.length)return s;var o=s.toLowerCase().match(/\b\w+$/);if(o&&this.inflections().uncountables.indexOf(o[0])>-1)return s;for(var a=0,u=t.length;u>a;a++)if(n=t[a],i=n[0],r=n[1],s.match(i)){s=s.replace(i,r);break}return s}};t.exports=i},{}],21:[function(e,t,n){(function(e){"use strict";function n(){this.approximations={};for(var e in i)this.approximate(e,i[e])}var i={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","×":"x","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"Th","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"'n","Ŋ":"NG","ŋ":"ng","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z"},r="?";n.getInstance=function(t){return e.__Inflector_Transliterator=e.__Inflector_Transliterator||{},e.__Inflector_Transliterator[t]=e.__Inflector_Transliterator[t]||new n,e.__Inflector_Transliterator[t]},n.prototype.approximate=function(e,t){this.approximations[e]=t},n.prototype.transliterate=function(e,t){var n=this;return e.replace(/[^\u0000-\u007f]/g,function(e){return n.approximations[e]||t||r})},t.exports=n}).call(this,e("_process"))},{_process:16}],22:[function(e,t,n){"use strict";function i(e){e.plural(/$/,"s"),e.plural(/s$/i,"s"),e.plural(/^(ax|test)is$/i,"$1es"),e.plural(/(octop|vir)us$/i,"$1i"),e.plural(/(octop|vir)i$/i,"$1i"),e.plural(/(alias|status)$/i,"$1es"),e.plural(/(bu)s$/i,"$1ses"),e.plural(/(buffal|tomat)o$/i,"$1oes"),e.plural(/([ti])um$/i,"$1a"),e.plural(/([ti])a$/i,"$1a"),e.plural(/sis$/i,"ses"),e.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),e.plural(/(hive)$/i,"$1s"),e.plural(/([^aeiouy]|qu)y$/i,"$1ies"),e.plural(/(x|ch|ss|sh)$/i,"$1es"),e.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),e.plural(/^(m|l)ouse$/i,"$1ice"),e.plural(/^(m|l)ice$/i,"$1ice"),e.plural(/^(ox)$/i,"$1en"),e.plural(/^(oxen)$/i,"$1"),e.plural(/(quiz)$/i,"$1zes"),e.singular(/s$/i,""),e.singular(/(ss)$/i,"$1"),e.singular(/(n)ews$/i,"$1ews"),e.singular(/([ti])a$/i,"$1um"),e.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),e.singular(/(^analy)(sis|ses)$/i,"$1sis"),e.singular(/([^f])ves$/i,"$1fe"),e.singular(/(hive)s$/i,"$1"),e.singular(/(tive)s$/i,"$1"),e.singular(/([lr])ves$/i,"$1f"),e.singular(/([^aeiouy]|qu)ies$/i,"$1y"),e.singular(/(s)eries$/i,"$1eries"),e.singular(/(m)ovies$/i,"$1ovie"),e.singular(/(x|ch|ss|sh)es$/i,"$1"),e.singular(/^(m|l)ice$/i,"$1ouse"),e.singular(/(bus)(es)?$/i,"$1"),e.singular(/(o)es$/i,"$1"),e.singular(/(shoe)s$/i,"$1"),e.singular(/(cris|test)(is|es)$/i,"$1is"),e.singular(/^(a)x[ie]s$/i,"$1xis"),e.singular(/(octop|vir)(us|i)$/i,"$1us"),e.singular(/(alias|status)(es)?$/i,"$1"),e.singular(/^(ox)en/i,"$1"),e.singular(/(vert|ind)ices$/i,"$1ex"),e.singular(/(matr)ices$/i,"$1ix"),e.singular(/(quiz)zes$/i,"$1"),e.singular(/(database)s$/i,"$1"),e.irregular("person","people"),e.irregular("man","men"),e.irregular("child","children"),e.irregular("sex","sexes"),e.irregular("move","moves"),e.irregular("zombie","zombies"),e.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}t.exports={en:i}},{}],23:[function(e,t,n){"use strict";function i(e,t){return r.call(e,t)}var r=Object.prototype.hasOwnProperty;t.exports=i},{}],24:[function(e,t,n){"use strict";function i(e){return e.split("").map(function(e){return"(?:"+[e.toUpperCase(),e.toLowerCase()].join("|")+")"}).join("")}t.exports=i},{}],25:[function(e,t,n){"use strict";function i(e){return"[object Function]"===r.call(e)}var r=Object.prototype.toString;t.exports=i},{}],26:[function(e,t,n){"use strict";function i(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&r.call(e,n,1)}var r=Array.prototype.splice;t.exports=i},{}],27:[function(e,t,n){var i=e("./vdom/create-element.js");t.exports=i},{"./vdom/create-element.js":40}],28:[function(e,t,n){var i=e("./vtree/diff.js");t.exports=i},{"./vtree/diff.js":60}],29:[function(e,t,n){var i=e("./virtual-hyperscript/index.js");t.exports=i},{"./virtual-hyperscript/index.js":47}],30:[function(e,t,n){var i=e("./diff.js"),r=e("./patch.js"),s=e("./h.js"),o=e("./create-element.js"),a=e("./vnode/vnode.js"),u=e("./vnode/vtext.js");t.exports={diff:i,patch:r,h:s,create:o,VNode:a,VText:u}},{"./create-element.js":27,"./diff.js":28,"./h.js":29,"./patch.js":38,"./vnode/vnode.js":56,"./vnode/vtext.js":58}],31:[function(e,t,n){t.exports=function(e){var t,n=String.prototype.split,i=/()??/.exec("")[1]===e;return t=function(t,r,s){if("[object RegExp]"!==Object.prototype.toString.call(r))return n.call(t,r,s);var o,a,u,c,h=[],l=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.extended?"x":"")+(r.sticky?"y":""),p=0,r=new RegExp(r.source,l+"g");for(t+="",i||(o=new RegExp("^"+r.source+"$(?!\\s)",l)),s=s===e?-1>>>0:s>>>0;(a=r.exec(t))&&(u=a.index+a[0].length,!(u>p&&(h.push(t.slice(p,a.index)),!i&&a.length>1&&a[0].replace(o,function(){for(var t=1;t<arguments.length-2;t++)arguments[t]===e&&(a[t]=e)}),a.length>1&&a.index<t.length&&Array.prototype.push.apply(h,a.slice(1)),c=a[0].length,p=u,h.length>=s)));)r.lastIndex===a.index&&r.lastIndex++;return p===t.length?(c||!r.test(""))&&h.push(""):h.push(t.slice(p)),h.length>s?h.slice(0,s):h}}()},{}],32:[function(e,t,n){"use strict";function i(e){var t=e[o];return t||(t=e[o]={}),t}var r=e("individual/one-version"),s="7";r("ev-store",s);var o="__EV_STORE_KEY@"+s;t.exports=i},{"individual/one-version":34}],33:[function(e,t,n){(function(e){"use strict";function n(e,t){return e in i?i[e]:(i[e]=t,t)}var i="undefined"!=typeof window?window:"undefined"!=typeof e?e:{};t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t,n){"use strict";function i(e,t,n){var i="__INDIVIDUAL_ONE_VERSION_"+e,s=i+"_ENFORCE_SINGLETON",o=r(s,t);if(o!==t)throw new Error("Can only have one copy of "+e+".\nYou already have version "+o+" installed.\nThis means you cannot install version "+t);return r(i,n)}var r=e("./index.js");t.exports=i},{"./index.js":33}],35:[function(e,t,n){(function(n){var i="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},r=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var s=i["__GLOBAL_DOCUMENT_CACHE@4"];s||(s=i["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":15}],36:[function(e,t,n){"use strict";t.exports=function(e){return"object"==typeof e&&null!==e}},{}],37:[function(e,t,n){function i(e){return"[object Array]"===s.call(e)}var r=Array.isArray,s=Object.prototype.toString;t.exports=r||i},{}],38:[function(e,t,n){var i=e("./vdom/patch.js");t.exports=i},{"./vdom/patch.js":43}],39:[function(e,t,n){function i(e,t,n){for(var i in t){var o=t[i];void 0===o?r(e,i,o,n):u(o)?(r(e,i,o,n),o.hook&&o.hook(e,i,n?n[i]:void 0)):a(o)?s(e,t,n,i,o):e[i]=o}}function r(e,t,n,i){if(i){var r=i[t];if(u(r))r.unhook&&r.unhook(e,t,n);else if("attributes"===t)for(var s in r)e.removeAttribute(s);else if("style"===t)for(var o in r)e.style[o]="";else"string"==typeof r?e[t]="":e[t]=null}}function s(e,t,n,i,r){var s=n?n[i]:void 0;if("attributes"!==i){if(s&&a(s)&&o(s)!==o(r))return void(e[i]=r);a(e[i])||(e[i]={});var u="style"===i?"":void 0;for(var c in r){var h=r[c];e[i][c]=void 0===h?u:h}}else for(var l in r){var p=r[l];void 0===p?e.removeAttribute(l):e.setAttribute(l,p)}}function o(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var a=e("is-object"),u=e("../vnode/is-vhook.js");t.exports=i},{"../vnode/is-vhook.js":51,"is-object":36}],40:[function(e,t,n){function i(e,t){var n=t?t.document||r:r,h=t?t.warn:null;if(e=c(e).a,u(e))return e.init();if(a(e))return n.createTextNode(e.text);if(!o(e))return h&&h("Item is not a valid virtual dom node",e),null;var l=null===e.namespace?n.createElement(e.tagName):n.createElementNS(e.namespace,e.tagName),p=e.properties;s(l,p);for(var f=e.children,m=0;m<f.length;m++){var d=i(f[m],t);d&&l.appendChild(d)}return l}var r=e("global/document"),s=e("./apply-properties"),o=e("../vnode/is-vnode.js"),a=e("../vnode/is-vtext.js"),u=e("../vnode/is-widget.js"),c=e("../vnode/handle-thunk.js");t.exports=i},{"../vnode/handle-thunk.js":49,"../vnode/is-vnode.js":52,"../vnode/is-vtext.js":53,"../vnode/is-widget.js":54,"./apply-properties":39,"global/document":35}],41:[function(e,t,n){function i(e,t,n,i){return n&&0!==n.length?(n.sort(o),r(e,t,n,i,0)):{}}function r(e,t,n,i,o){if(i=i||{},e){s(n,o,o)&&(i[o]=e);var u=t.children;if(u)for(var c=e.childNodes,h=0;h<t.children.length;h++){o+=1;var l=u[h]||a,p=o+(l.count||0);s(n,o,p)&&r(c[h],l,n,i,o),o=p}}return i}function s(e,t,n){if(0===e.length)return!1;for(var i,r,s=0,o=e.length-1;o>=s;){if(i=(o+s)/2>>0,r=e[i],s===o)return r>=t&&n>=r;if(t>r)s=i+1;else{if(!(r>n))return!0;o=i-1}}return!1}function o(e,t){return e>t?1:-1}var a={};t.exports=i},{}],42:[function(e,t,n){function i(e,t,n){var i=e.type,c=e.vNode,f=e.patch;switch(i){case m.REMOVE:return r(t,c);case m.INSERT:return s(t,f,n);case m.VTEXT:return o(t,c,f,n);case m.WIDGET:return a(t,c,f,n);case m.VNODE:return u(t,c,f,n);case m.ORDER:return h(t,f),t;case m.PROPS:return p(t,f,c.properties),t;case m.THUNK:return l(t,n.patch(t,f,n));default:return t}}function r(e,t){var n=e.parentNode;return n&&n.removeChild(e),c(e,t),null}function s(e,t,n){var i=d(t,n);return e&&e.appendChild(i),e}function o(e,t,n,i){var r;if(3===e.nodeType)e.replaceData(0,e.length,n.text),r=e;else{var s=e.parentNode;r=d(n,i),s&&r!==e&&s.replaceChild(r,e)}return r}function a(e,t,n,i){var r,s=v(t,n);r=s?n.update(t,e)||e:d(n,i);var o=e.parentNode;return o&&r!==e&&o.replaceChild(r,e),s||c(e,t),r}function u(e,t,n,i){var r=e.parentNode,s=d(n,i);return r&&s!==e&&r.replaceChild(s,e),s}function c(e,t){"function"==typeof t.destroy&&f(t)&&t.destroy(e)}function h(e,t){for(var n,i,r,s=e.childNodes,o={},a=0;a<t.removes.length;a++)i=t.removes[a],n=s[i.from],i.key&&(o[i.key]=n),e.removeChild(n);for(var u=s.length,c=0;c<t.inserts.length;c++)r=t.inserts[c],n=o[r.key],e.insertBefore(n,r.to>=u++?null:s[r.to])}function l(e,t){return e&&t&&e!==t&&e.parentNode&&e.parentNode.replaceChild(t,e),t}var p=e("./apply-properties"),f=e("../vnode/is-widget.js"),m=e("../vnode/vpatch.js"),d=e("./create-element"),v=e("./update-widget");t.exports=i},{"../vnode/is-widget.js":54,"../vnode/vpatch.js":57,"./apply-properties":39,"./create-element":40,"./update-widget":44}],43:[function(e,t,n){function i(e,t){return r(e,t)}function r(e,t,n){var i=o(t);if(0===i.length)return e;var u=c(e,t.a,i),h=e.ownerDocument;n||(n={patch:r},h!==a&&(n.document=h));for(var l=0;l<i.length;l++){var p=i[l];e=s(e,u[p],t[p],n)}return e}function s(e,t,n,i){if(!t)return e;var r;if(u(n))for(var s=0;s<n.length;s++)r=h(n[s],t,i),t===e&&(e=r);else r=h(n,t,i),t===e&&(e=r);return e}function o(e){var t=[];for(var n in e)"a"!==n&&t.push(Number(n));return t}var a=e("global/document"),u=e("x-is-array"),c=e("./dom-index"),h=e("./patch-op");t.exports=i},{"./dom-index":41,"./patch-op":42,"global/document":35,"x-is-array":37}],44:[function(e,t,n){function i(e,t){return r(e)&&r(t)?"name"in e&&"name"in t?e.id===t.id:e.init===t.init:!1}var r=e("../vnode/is-widget.js");t.exports=i},{"../vnode/is-widget.js":54}],45:[function(e,t,n){"use strict";function i(e){return this instanceof i?void(this.value=e):new i(e)}var r=e("ev-store");t.exports=i,i.prototype.hook=function(e,t){var n=r(e),i=t.substr(3);n[i]=this.value},i.prototype.unhook=function(e,t){var n=r(e),i=t.substr(3);n[i]=void 0}},{"ev-store":32}],46:[function(e,t,n){"use strict";function i(e){return this instanceof i?void(this.value=e):new i(e)}t.exports=i,i.prototype.hook=function(e,t){e[t]!==this.value&&(e[t]=this.value)}},{}],47:[function(e,t,n){"use strict";function i(e,t,n){var i,o,u,c,h=[];return!n&&a(t)&&(n=t,o={}),o=o||t||{},i=y(e,o),o.hasOwnProperty("key")&&(u=o.key,o.key=void 0),o.hasOwnProperty("namespace")&&(c=o.namespace,o.namespace=void 0),"INPUT"!==i||c||!o.hasOwnProperty("value")||void 0===o.value||v(o.value)||(o.value=x(o.value)),s(o),void 0!==n&&null!==n&&r(n,h,i,o),new l(i,o,h,u,c)}function r(e,t,n,i){if("string"==typeof e)t.push(new p(e));else if(o(e))t.push(e);else{if(!h(e)){if(null===e||void 0===e)return;throw u({foreignObject:e,parentVnode:{tagName:n,properties:i}})}for(var s=0;s<e.length;s++)r(e[s],t,n,i)}}function s(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(v(n))continue;"ev-"===t.substr(0,3)&&(e[t]=w(n))}}function o(e){return f(e)||m(e)||d(e)||g(e)}function a(e){return"string"==typeof e||h(e)||o(e)}function u(e){var t=new Error;return t.type="virtual-hyperscript.unexpected.virtual-element",t.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+c(e.foreignObject)+".\nThe parent vnode is:\n"+c(e.parentVnode),t.foreignObject=e.foreignObject,t.parentVnode=e.parentVnode,t}function c(e){try{return JSON.stringify(e,null,"    ")}catch(t){return String(e)}}var h=e("x-is-array"),l=e("../vnode/vnode.js"),p=e("../vnode/vtext.js"),f=e("../vnode/is-vnode"),m=e("../vnode/is-vtext"),d=e("../vnode/is-widget"),v=e("../vnode/is-vhook"),g=e("../vnode/is-thunk"),y=e("./parse-tag.js"),x=e("./hooks/soft-set-hook.js"),w=e("./hooks/ev-hook.js");t.exports=i},{"../vnode/is-thunk":50,"../vnode/is-vhook":51,"../vnode/is-vnode":52,"../vnode/is-vtext":53,"../vnode/is-widget":54,"../vnode/vnode.js":56,"../vnode/vtext.js":58,"./hooks/ev-hook.js":45,"./hooks/soft-set-hook.js":46,"./parse-tag.js":48,"x-is-array":37}],48:[function(e,t,n){"use strict";function i(e,t){if(!e)return"DIV";var n=!t.hasOwnProperty("id"),i=r(e,s),a=null;o.test(i[1])&&(a="DIV");var u,c,h,l;for(l=0;l<i.length;l++)c=i[l],c&&(h=c.charAt(0),a?"."===h?(u=u||[],u.push(c.substring(1,c.length))):"#"===h&&n&&(t.id=c.substring(1,c.length)):a=c);return u&&(t.className&&u.push(t.className),t.className=u.join(" ")),t.namespace?a:a.toUpperCase()}var r=e("browser-split"),s=/([\.#]?[a-zA-Z0-9_:-]+)/,o=/^\.|#/;t.exports=i},{"browser-split":31}],49:[function(e,t,n){function i(e,t){var n=e,i=t;return u(t)&&(i=r(t,e)),u(e)&&(n=r(e,null)),{a:n,b:i}}function r(e,t){var n=e.vnode;if(n||(n=e.vnode=e.render(t)),!(s(n)||o(n)||a(n)))throw new Error("thunk did not return a valid node");return n}var s=e("./is-vnode"),o=e("./is-vtext"),a=e("./is-widget"),u=e("./is-thunk");t.exports=i},{"./is-thunk":50,"./is-vnode":52,"./is-vtext":53,"./is-widget":54}],50:[function(e,t,n){function i(e){return e&&"Thunk"===e.type}t.exports=i},{}],51:[function(e,t,n){function i(e){return e&&("function"==typeof e.hook&&!e.hasOwnProperty("hook")||"function"==typeof e.unhook&&!e.hasOwnProperty("unhook"))}t.exports=i},{}],52:[function(e,t,n){function i(e){return e&&"VirtualNode"===e.type&&e.version===r}var r=e("./version");t.exports=i},{"./version":55}],53:[function(e,t,n){function i(e){return e&&"VirtualText"===e.type&&e.version===r}var r=e("./version");t.exports=i},{"./version":55}],54:[function(e,t,n){function i(e){return e&&"Widget"===e.type}t.exports=i},{}],55:[function(e,t,n){t.exports="2"},{}],56:[function(e,t,n){function i(e,t,n,i,r){this.tagName=e,this.properties=t||c,this.children=n||h,this.key=null!=i?String(i):void 0,this.namespace="string"==typeof r?r:null;var l,p=n&&n.length||0,f=0,m=!1,d=!1,v=!1;for(var g in t)if(t.hasOwnProperty(g)){var y=t[g];u(y)&&y.unhook&&(l||(l={}),l[g]=y)}for(var x=0;p>x;x++){var w=n[x];s(w)?(f+=w.count||0,!m&&w.hasWidgets&&(m=!0),!d&&w.hasThunks&&(d=!0),v||!w.hooks&&!w.descendantHooks||(v=!0)):!m&&o(w)?"function"==typeof w.destroy&&(m=!0):!d&&a(w)&&(d=!0)}this.count=p+f,this.hasWidgets=m,this.hasThunks=d,this.hooks=l,this.descendantHooks=v}var r=e("./version"),s=e("./is-vnode"),o=e("./is-widget"),a=e("./is-thunk"),u=e("./is-vhook");t.exports=i;var c={},h=[];i.prototype.version=r,i.prototype.type="VirtualNode"},{"./is-thunk":50,"./is-vhook":51,"./is-vnode":52,"./is-widget":54,"./version":55}],57:[function(e,t,n){function i(e,t,n){this.type=Number(e),this.vNode=t,this.patch=n}var r=e("./version");i.NONE=0,i.VTEXT=1,i.VNODE=2,i.WIDGET=3,i.PROPS=4,i.ORDER=5,i.INSERT=6,i.REMOVE=7,i.THUNK=8,t.exports=i,i.prototype.version=r,i.prototype.type="VirtualPatch"},{"./version":55}],58:[function(e,t,n){function i(e){this.text=String(e)}var r=e("./version");t.exports=i,i.prototype.version=r,i.prototype.type="VirtualText"},{"./version":55}],59:[function(e,t,n){function i(e,t){var n;for(var a in e){a in t||(n=n||{},n[a]=void 0);var u=e[a],c=t[a];if(u!==c)if(s(u)&&s(c))if(r(c)!==r(u))n=n||{},n[a]=c;else if(o(c))n=n||{},n[a]=c;else{var h=i(u,c);h&&(n=n||{},n[a]=h)}else n=n||{},n[a]=c}for(var l in t)l in e||(n=n||{},n[l]=t[l]);return n}function r(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var s=e("is-object"),o=e("../vnode/is-vhook");t.exports=i},{"../vnode/is-vhook":51,"is-object":36}],60:[function(e,t,n){function i(e,t){var n={a:e};return r(e,t,n,0),n}function r(e,t,n,i){if(e!==t){var r=n[i],a=!1;if(_(e)||_(t))u(e,t,n,i);else if(null==t)w(e)||(o(e,n,i),r=n[i]),r=d(r,new g(g.REMOVE,e,t));else if(y(t))if(y(e))if(e.tagName===t.tagName&&e.namespace===t.namespace&&e.key===t.key){var c=N(e.properties,t.properties);c&&(r=d(r,new g(g.PROPS,e,c))),r=s(e,t,n,r,i)}else r=d(r,new g(g.VNODE,e,t)),a=!0;else r=d(r,new g(g.VNODE,e,t)),a=!0;else x(t)?x(e)?e.text!==t.text&&(r=d(r,new g(g.VTEXT,e,t))):(r=d(r,new g(g.VTEXT,e,t)),a=!0):w(t)&&(w(e)||(a=!0),r=d(r,new g(g.WIDGET,e,t)));r&&(n[i]=r),a&&o(e,n,i)}}function s(e,t,n,i,s){for(var o=e.children,a=p(o,t.children),u=a.children,c=o.length,h=u.length,l=c>h?c:h,f=0;l>f;f++){var m=o[f],v=u[f];s+=1,m?r(m,v,n,s):v&&(i=d(i,new g(g.INSERT,null,v))),y(m)&&m.count&&(s+=m.count)}return a.moves&&(i=d(i,new g(g.ORDER,e,a.moves))),i}function o(e,t,n){h(e,t,n),a(e,t,n)}function a(e,t,n){if(w(e))"function"==typeof e.destroy&&(t[n]=d(t[n],new g(g.REMOVE,e,null)));else if(y(e)&&(e.hasWidgets||e.hasThunks))for(var i=e.children,r=i.length,s=0;r>s;s++){var o=i[s];n+=1,a(o,t,n),y(o)&&o.count&&(n+=o.count)}else _(e)&&u(e,null,t,n)}function u(e,t,n,r){var s=b(e,t),o=i(s.a,s.b);c(o)&&(n[r]=new g(g.THUNK,null,o))}function c(e){for(var t in e)if("a"!==t)return!0;return!1}function h(e,t,n){if(y(e)){if(e.hooks&&(t[n]=d(t[n],new g(g.PROPS,e,l(e.hooks)))),e.descendantHooks||e.hasThunks)for(var i=e.children,r=i.length,s=0;r>s;s++){var o=i[s];n+=1,h(o,t,n),y(o)&&o.count&&(n+=o.count)}}else _(e)&&u(e,null,t,n)}function l(e){var t={};for(var n in e)t[n]=void 0;return t}function p(e,t){var n=m(t),i=n.keys,r=n.free;if(r.length===t.length)return{children:t,moves:null};var s=m(e),o=s.keys,a=s.free;if(a.length===e.length)return{children:t,moves:null};for(var u=[],c=0,h=r.length,l=0,p=0;p<e.length;p++){var d,v=e[p];v.key?i.hasOwnProperty(v.key)?(d=i[v.key],u.push(t[d])):(d=p-l++,u.push(null)):h>c?(d=r[c++],u.push(t[d])):(d=p-l++,u.push(null))}for(var g=c>=r.length?t.length:r[c],y=0;y<t.length;y++){var x=t[y];x.key?o.hasOwnProperty(x.key)||u.push(x):y>=g&&u.push(x)}for(var w,_=u.slice(),b=0,N=[],k=[],E=0;E<t.length;){var P=t[E];for(w=_[b];null===w&&_.length;)N.push(f(_,b,null)),w=_[b];w&&w.key===P.key?(b++,E++):P.key?(w&&w.key&&i[w.key]!==E+1?(N.push(f(_,b,w.key)),w=_[b],w&&w.key===P.key?b++:k.push({key:P.key,to:E})):k.push({key:P.key,to:E}),E++):w&&w.key&&N.push(f(_,b,w.key))}for(;b<_.length;)w=_[b],N.push(f(_,b,w&&w.key));return N.length!==l||k.length?{children:u,
moves:{removes:N,inserts:k}}:{children:u,moves:null}}function f(e,t,n){return e.splice(t,1),{from:t,key:n}}function m(e){for(var t={},n=[],i=e.length,r=0;i>r;r++){var s=e[r];s.key?t[s.key]=r:n.push(r)}return{keys:t,free:n}}function d(e,t){return e?(v(e)?e.push(t):e=[e,t],e):t}var v=e("x-is-array"),g=e("../vnode/vpatch"),y=e("../vnode/is-vnode"),x=e("../vnode/is-vtext"),w=e("../vnode/is-widget"),_=e("../vnode/is-thunk"),b=e("../vnode/handle-thunk"),N=e("./diff-props");t.exports=i},{"../vnode/handle-thunk":49,"../vnode/is-thunk":50,"../vnode/is-vnode":52,"../vnode/is-vtext":53,"../vnode/is-widget":54,"../vnode/vpatch":57,"./diff-props":59,"x-is-array":37}]},{},[1])(1)});