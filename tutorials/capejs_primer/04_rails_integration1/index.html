<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Integrate Cape.JS with Ruby on Rails (1) - Cape.JS Primer - Cape.JS: Documentation</title>
  <meta name="description" content="" />
  <meta name="generator" content="Bootply" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="http://capejs.github.io/capejs/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
  <link href="http://capejs.github.io/capejs/css/styles.css" rel="stylesheet">
  <link href="http://capejs.github.io/capejs/highlight/styles/default.css" rel="stylesheet">
  <link rel="shortcut icon" href="http://capejs.github.io/capejs/images/favicon_capejs.ico" type="image/vnd.microsoft.icon" />
  <link rel="icon" href="http://capejs.github.io/capejs/images/favicon_capejs.ico" type="image/vnd.microsoft.icon" />
</head>

<body>
<div id="navbar-md" class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <a href="/capejs/" class="navbar-brand">Cape.JS</a>
    </div>
    <nav role="navigation">
      <ul class="nav navbar-nav">
        <li><a href="http://capejs.github.io/capejs/tutorials/" class="link">Tutorials</a></li>
        <li><a href="http://capejs.github.io/capejs/api">API Reference</a></li>
        <li>
          <a href="https://github.com/capejs/capejs">GitHub Repository
          <i class="fa fa-external-link"></i></a>
        </li>
      </ul>
      <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".sidebar-nav">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </nav>
  </div>
</div>
<div id="navbar-sm" class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
      <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".sidebar-nav">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="http://capejs.github.io/capejs/" class="navbar-brand">Cape.JS Doc</a>
      <a href="http://capejs.github.io/capejs/tutorials/" class="link">Tutorials</a>
      <a href="http://capejs.github.io/capejs/api/" class="link">API</a>
      <a href="https://github.com/capejs/capejs" class="link">GitHub
      <i class="fa fa-external-link"></i></a>
  </div>
</div>

<div class="container">
  <div class="row row-offcanvas row-offcanvas-left">
    
        <div class="col-xs-12 col-md-3 sidebar-offcanvas" id="sidebar" role="navigation">
      <ul class="nav">
      
      
        <li><a href="http://capejs.github.io/capejs/#what-is">What is Cape.JS?</a></li>
      
        <li><a href="http://capejs.github.io/capejs/#installation">Installation</a></li>
      
        <li><a href="http://capejs.github.io/capejs/#faq">FAQ</a></li>
      
      
        <li>
          <a href="http://capejs.github.io/capejs/components">Components</a>
          
          <ul>
          
            <li><a href="http://capejs.github.io/capejs/components/#hello-world">Hello World</a></li>
          
            <li><a href="http://capejs.github.io/capejs/components/#es6">ECMAScript 6</a></li>
          
            <li><a href="http://capejs.github.io/capejs/components/#dom-tree">Building Virtual DOM Tree</a></li>
          
            <li><a href="http://capejs.github.io/capejs/components/#click-counter">Click Counter</a></li>
          
            <li><a href="http://capejs.github.io/capejs/components/#shortcut-methods">Shortcut Methods</a></li>
          
            <li><a href="http://capejs.github.io/capejs/components/#html-styles">HTML Styles</a></li>
          
            <li><a href="http://capejs.github.io/capejs/components/#todo-list">Todo List</a></li>
          
            <li><a href="http://capejs.github.io/capejs/components/#mixins">Mixins</a></li>
          
          </ul>
      
        <li>
          <a href="http://capejs.github.io/capejs/data_stores">Data Stores</a>
          
          <ul>
          
            <li><a href="http://capejs.github.io/capejs/data_stores/#basics">Basics</a></li>
          
            <li><a href="http://capejs.github.io/capejs/data_stores/#ajax">Ajax</a></li>
          
          </ul>
      
        <li>
          <a href="http://capejs.github.io/capejs/collection_agents">Collection Agents</a>
          
          <ul>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#basics">Basics</a></li>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#agent-adapters">Agent Adapters</a></li>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#defining-classes">Defining Classes</a></li>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#initialization">Initialization</a></li>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#creating-resources">Creating Resources</a></li>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#rest-operations">REST Operations</a></li>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#callbacks-and-error-handlers">Callbacks and Error Handlers</a></li>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#changing-path-prefix">Changing the Path Prefix</a></li>
          
            <li><a href="http://capejs.github.io/capejs/collection_agents/#options">Options</a></li>
          
          </ul>
      
        <li>
          <a href="http://capejs.github.io/capejs/resource_agents">Resource Agents</a>
          
          <ul>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#basics">Basics</a></li>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#agent-adapters">Agent Adapters</a></li>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#defining-classes">Defining Classes</a></li>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#creating-a-new-resource">Creating a New Resource</a></li>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#editing-a-resource">Editing a Resource</a></li>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#building-a-dual-use-form">Building a Dual-Use Form</a></li>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#deleting-a-resource">Deleting a Resource</a></li>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#specifying-a-callback">Specifying a Callback</a></li>
          
            <li><a href="http://capejs.github.io/capejs/resource_agents/#options">Options</a></li>
          
          </ul>
      
        <li>
          <a href="http://capejs.github.io/capejs/router">Router</a>
          
          <ul>
          
            <li><a href="http://capejs.github.io/capejs/router/#simple-routes">Simple Routes</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#containers">Containers</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#resource-based-routes">Resource Based Routes</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#singular-resources">Singular Resources</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#nested-resources">Nested Resources</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#namespaces">Namespaces</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#adding-custom-actions">Adding Custom Actions</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#changing-root-container">Changing Root Container</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#vars">Vars</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#flash">Flash</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#navigation-and-redirection">Navigation and Redirection</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#component-replacement">Component Replacement</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#query-params">Query Rarams</a></li>
          
            <li><a href="http://capejs.github.io/capejs/router/#before-navigation-callbacks">Before-Navigation Callbacks</a></li>
          
          </ul>
      
        <li>
          <a href="http://capejs.github.io/capejs/tutorials">Tutorials</a>
          
          <ul>
          
            <li><a href="http://capejs.github.io/capejs/tutorials/#greeter">How to Make a Single Page Application (SPA) with Cape.JS and Rails</a></li>
          
            <li><a href="http://capejs.github.io/capejs/tutorials/#capejs-primer">Cape.JS Primer</a></li>
          
          </ul>
      
        <li><a href="http://capejs.github.io/capejs/api">API Reference</a></li>
      </ul>
    </div>

    
    <div class="col-sm-12 col-md-9">
      <article>
        <header>
          <h2>Integrate Cape.JS with Ruby on Rails (1) - Cape.JS Primer</h2>
          <div class="post-meta clearfix">
          </div>
        </header>
        <div>
          <p>On 3 lectures including <a href="../03_creating_text_nodes">the previous time</a>, I explained how to create virtual DOM by Cape.JS.</p>

<p>From this lecture, I&rsquo;ll explain steps to integrate Cape.JS with <a href="http://rubyonrails.org/">Ruby on Rails</a>.</p>

<div class="note">
Please acquire a demonstration application at <a href="https://github.com/capejs/capejs-demo-on-rails">https://github.com/capejs/capejs-demo-on-rails</a> if you are impatient like "I want you to show me a source code not explanation." A sample Rail application we make on this lecture will be a very similar one like the demonstration application.
</div>

<p>As a precondition, Ruby (v2.1 or later), Rails 4.2、Node.js (v0.12 or later) and Git (v2.0 or later) are supposed to be installed on your PC.</p>

<div class="note">
I skip the explanation of steps to install each software. Please search the word such as "node.js install windows" and "git install mac" on the internet.
</div>

<hr />

<p>The application we will make on some lectures from this lecture is easy one to administrate &ldquo;To-do list&rdquo; The data of To-do list is stored in SQlite3 database. We don&rsquo;t create the function of users&rsquo; singing in･out.</p>

<p>Let&rsquo;s begin to create framework of the application.</p>

<pre><code class="language-text">$ rails new todo_list --skip-bundle
$ cd todo_list
</code></pre>

<p>Open <code>Gemfile</code> on the text editor and add a line as following at the end.:</p>

<pre><code class="language-ruby">gem 'sprockets-es6', '~&gt; 0.6.1'
</code></pre>

<div class="note">
Tell the truth, this added line isn't necessary to use Cape.JS. But, Cape.JS programming becomes more fun if you use the syntax of ECMAScript 6. (which is commonly called ES6. JavaScript's standard issue of next term) <code>sprockets-es6</code> is a Gem package that convert the program written in ES6 to the running one for JavaScript.
</div>

<p>Then, install the Gem packages.</p>

<pre><code class="language-text">$ bin/bundle
</code></pre>

<div class="note">
Write <code>ruby</code> before the command if you are Windows user." Generally, when you run the command starting with <code>bin/</code>, you need to write  <code>ruby</code> at the top on Windows.
</div>

<hr />

<p>And install <a href="http://bower.io/">Bower</a> (JavaScript&rsquo;s package administration tool).</p>

<pre><code class="language-text">$ sudo npm install -g bower
</code></pre>

<div class="note">
On Windows, omit <code>sudo</code>.
</div>

<p>Create a new file <code>.bowerrc</code> on the text editor and write as following.</p>

<pre><code class="language-json">{
  &quot;directory&quot;: &quot;vendor/assets/components&quot;
}
</code></pre>

<p>The package administrated by Bower is installed at <code>vendor/assets/components</code> directory.</p>

<p>Next, install Cape.JS.:</p>

<pre><code class="language-text">$ bower install capejs
</code></pre>

<p>As that above, install Bootstrap, Font Awesome, and lodash by using Bower.</p>

<pre><code class="language-text">$ bower install bootstrap fontawesome lodash
</code></pre>

<div class="note">
These packages don't need Cape.JS but we install them here because we will use them later of the next lecture.
</div>

<p>Moreover, set default of Bower. Run the command <code>bower init</code> on terminal. Keep pushing Enter key until the prompt <code>? name: (todo_list)</code> display at first. Since that, about 10 questions is displayed but just keep pushing Enter key with empty value.</p>

<p>As the result, the file <code>bower.json</code> with the content like following is made.</p>

<pre><code class="language-json">{
  &quot;name&quot;: &quot;todo_list&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;authors&quot;: [
    &quot;John Doe &lt;john@example.com&gt;&quot;
  ],
  &quot;license&quot;: &quot;MIT&quot;,
  &quot;ignore&quot;: [
    &quot;**/.*&quot;,
    &quot;node_modules&quot;,
    &quot;bower_components&quot;,
    &quot;vendor/assets/components&quot;,
    &quot;test&quot;,
    &quot;tests&quot;
  ],
  &quot;dependencies&quot;: {
    &quot;capejs&quot;: &quot;~1.0.0&quot;,
    &quot;bootstrap&quot;: &quot;~3.3.4&quot;,
    &quot;fontawesome&quot;: &quot;~4.3.0&quot;,
    &quot;lodash&quot;: &quot;~3.9.3&quot;
  }
}
</code></pre>

<div class="note">
At the time when I write this article(May 29th, 2015), There are version numbers in <code>dependencies</code> section like above. But, they will change in the future. It may not be a big problem if the last version number changes. In case that first one and second one are different, rewrite <code>bower.json</code> as above and run `bower install` to let them being same before trying the contents of this lecture.
</div>

<div class="note">
Bootstrap's <code>3.3.5</code> was released on June 17th, 2015 but it doesn't work well because this version has bad chemistry with Rails (accurately, with Sprockets). So, change bootstrap's version number in <code>dependencies</code> section of <code>bower.json</code> from <code>~3.3.4</code> to <code>=3.3.4</code>. The version number is fixed to <code>3.3.4</code> by doing this.
</div>

<hr />

<p>Mount Cape.JS to the Rails application. Open <code>app/assets/javascripts/application.js</code> on the text editor and rewrite the content as following.:</p>

<pre><code class="language-javascript">//= require jquery
//= require jquery_ujs
//= require turbolinks
//= require capejs
//= require bootstrap
//= require lodash
//= require_tree .
</code></pre>

<p>In addition, open <code>app/assets/stylesheets/application.css</code> and rewrite the content as following.:</p>

<pre><code class="language-css">/*
 *= require_tree .
 *= require fontawesome
 *= require_self
 */
</code></pre>

<p>Now, it&rsquo;s ready to start developing Rails application by using Cape.JS.</p>

<hr />

<p>On <a href="../05_rails_integration2">the next lecture</a>, we&rsquo;ll still continue to develop &ldquo;To-do list&rdquo; application.</p>

        </div>
      </article>
    </div>
  </div>
</div>

<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="http://capejs.github.io/capejs/js/bootstrap.min.js"></script>
<script src="http://capejs.github.io/capejs/js/scripts.js"></script>
<script src="http://capejs.github.io/capejs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<div id="footer-sm" class="footer navbar-fixed-bottom">
  <div>Copyright &copy; 2015-2016 <a href="https://github.com/kuroda">Tsutomu Kuroda</a> and contributors.</div>
</div>
<div id="footer-xs" class="footer">
  <div>Copyright &copy; 2015-2016 <a href="https://github.com/kuroda">Tsutomu Kuroda</a> and contributors.</div>
</div>

</body>
</html>
