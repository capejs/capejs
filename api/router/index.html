<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>Cape.Router - API Reference - Cape.JS: Documentation</title>
  <meta name="generator" content="Bootply" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link href="http://oiax.github.io/capejs/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
  <link href="http://oiax.github.io/capejs/css/styles.css" rel="stylesheet">
  <link href="http://oiax.github.io/capejs/highlight/styles/default.css" rel="stylesheet">
  <link rel="shortcut icon" href="http://oiax.github.io/capejs/images/favicon_capejs.ico" type="image/vnd.microsoft.icon" />
  <link rel="icon" href="http://oiax.github.io/capejs/images/favicon_capejs.ico" type="image/vnd.microsoft.icon" />
</head>

<body>
<div id="navbar-md" class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <a href="/capejs/" class="navbar-brand">Cape.JS</a>
    </div>
    <nav role="navigation">
      <ul class="nav navbar-nav">
        <li><a href="http://oiax.github.io/capejs/api">API Reference</a></li>
        <li>
          <a href="https://github.com/oiax/capejs">GitHub Repository
          <i class="fa fa-external-link"></i></a>
        </li>
      </ul>
      <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".sidebar-nav">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </nav>
  </div>
</div>
<div id="navbar-sm" class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
      <button type="button" class="navbar-toggle" data-toggle="offcanvas" data-target=".sidebar-nav">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="http://oiax.github.io/capejs/" class="navbar-brand">Cape.JS Doc</a>
      <a href="http://oiax.github.io/capejs/api/" class="link">API</a>
      <a href="https://github.com/oiax/capejs" class="link">GitHub
      <i class="fa fa-external-link"></i></a>
  </div>
</div>

<div class="container">
  <div class="row row-offcanvas row-offcanvas-left">
    
        <div class="col-xs-12 col-md-3 sidebar-offcanvas" id="sidebar" role="navigation">
      <ul class="nav" id="sidebar">
      
      
        <li>
          <a href="http://oiax.github.io/capejs/api">API Reference</a>
          
          
        </li>
      
        <li>
          <a href="http://oiax.github.io/capejs/api/cape">Cape</a>
          
          
          <ul>
          
            <li><a href="http://oiax.github.io/capejs/api/cape#create-collection-agent-class">.createCollectionAgentClass()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/cape#create-component-class">.createComponentClass()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/cape#create-data-store-class">.createDataStoreClass()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/cape#create-resource-agent-class">.createResourceAgentClass()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/cape#default-agent-adapter">.defaultAgentAdapter</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/cape#deep-extend">.deepExtend()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/cape#extend">.extend()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/cape#merge">.merge()</a></li>
          
          </ul>
          
        </li>
      
        <li>
          <a href="http://oiax.github.io/capejs/api/component">Cape.Component</a>
          
          
          <ul>
          
            <li><a href="http://oiax.github.io/capejs/api/component#checked-on">#checkedOn()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#form-data">#formData()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#json-for">#jsonFor()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#mount">#mount()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#params-for">#paramsFor()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#refresh">#refresh()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#root">#root</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#unmount">#unmount()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#val">#val()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/component#values-for">#valuesFor()</a></li>
          
          </ul>
          
        </li>
      
        <li>
          <a href="http://oiax.github.io/capejs/api/markup_builder">Cape.MarkupBuilder</a>
          
          
          <ul>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#general-notes">General notes</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#a-abbr-address-etc">#a(), #abbr(), #address(), etc.</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#area-base-br-etc">#area(), #base(), #br(), etc.</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#attr">#attr()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#btn">#btn()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#check-box">#checkBox()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#checked">#checked()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#class">#class()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#css">#css()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#data">#data()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#disabled">#disabled()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#elem">#elem()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#fa">#fa()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#fields-for">#fieldsFor()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#form-for">#formFor()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#hidden-field">#hiddenField()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#label-for">#labelFor()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#markup">#markup()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#true">#on()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#onblur-onfocus-etc">#onblur(), #onfocus(), etc.</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#password-field">#passwordField()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#radio-button">#radioButton()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#select-box">#selectBox()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#sp">#sp()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#space">#space()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#text">#text()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#textarea-field">#textareaField()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/markup_builder#text-field">#textField()</a></li>
          
          </ul>
          
        </li>
      
        <li>
          <a href="http://oiax.github.io/capejs/api/data_store">Cape.DataStore</a>
          
          
          <ul>
          
            <li><a href="http://oiax.github.io/capejs/api/data_store#constructor">Constructor</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/data_store#attach">#attach()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/data_store#create">.create()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/data_store#detach">#detach()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/data_store#propagate">#propagate()</a></li>
          
          </ul>
          
        </li>
      
        <li>
          <a href="http://oiax.github.io/capejs/api/collection_agent">Cape.CollectionAgent</a>
          
          
          <ul>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#constructor">Constructor</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#adapter">#adapter</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#after-refresh">#afterRefresh()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#ajax">#ajax()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#auto-refresh">#autoRefresh</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#base-path">#basePath</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#collection-path">#collectionPath()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#create">#create()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#data-type">#dataType()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#default-error-handler">#defaultErrorHandler()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#delete">#delete()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#destroy">#destory()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#get">#get</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#head">#head()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#headers">#headers</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#index">#index()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#member-path">#memberPath()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#objects">#objects</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#params-for-refresh">#paramsForRefresh()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#param-name">#paramName</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#patch">#patch()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#post">#post()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#put">#put()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#refresh">#refresh()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/collection_agent#update">#update()</a></li>
          
          </ul>
          
        </li>
      
        <li>
          <a href="http://oiax.github.io/capejs/api/resource_agent">Cape.ResourceAgent</a>
          
          
          <ul>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#constructor">Constructor</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#adapter">#adapter</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#ajax">#ajax()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#base-path">#basePath</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#client">#client</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#collection-path">#collectionPath()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#create">#create()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#data">#data</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#data-type">#dataType</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#default-error-handler">#defaultErrorHandler()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#destroy">#destroy()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#errors">#errors</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#form-name">#formName</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#headers">#headers</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#init">#init()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#member-path">#memberPath()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#object">#object</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#new-path">#newPath()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#nested-in">#nestedIn</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#param-name">#paramName</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#resource-name">#resourceName</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#singular">#singular</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#singular-path">#singularPath()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/resource_agent#update">#update()</a></li>
          
          </ul>
          
        </li>
      
        <li>
          <a href="http://oiax.github.io/capejs/api/router">Cape.Router</a>
          
          
          <ul>
          
            <li><a href="http://oiax.github.io/capejs/api/router#action">#action</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#attach">#attach()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#before-navigation">#beforeNavigation()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#component">#component</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#container">#container</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#detach">#detach()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#draw">#draw()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#error-handler">#errorHandler()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#flash">#flash</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#namespace">#namespace</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#navigate">#navigate()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#notify">#notify()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#mount">#mount()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#params">#params</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#query">#query</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#redirect-to">#redirectTo()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#resource">#resource</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#route-for">#routeFor()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#show">#show()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#start">#start()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#stop">#stop()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/router#vars">#vars</a></li>
          
          </ul>
          
        </li>
      
        <li>
          <a href="http://oiax.github.io/capejs/api/routing_mapper">Cape.RoutingMapper</a>
          
          
          <ul>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#collection">#collection()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#namespace">#namespace()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#new">#new()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#many">#many()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#member">#member()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#one">#one()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#page">#page()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#root">#root()</a></li>
          
            <li><a href="http://oiax.github.io/capejs/api/routing_mapper#view">#view()</a></li>
          
          </ul>
          
        </li>
      
      </ul>
    </div>

    
    <div class="col-sm-12 col-md-9">
      <article>
        <header>
          <h2>Cape.Router - API Reference</h2>
          <div class="post-meta clearfix">
          </div>
        </header>
        <div>
          

<p><a href="#action">#action</a> -
<a href="#attach">#attach()</a> -
<a href="#before-navigation">#beforeNavigation()</a> -
<a href="#component">#component</a> -
<a href="#container">#container</a> -
<a href="#detach">#detach()</a> -
<a href="#draw">#draw()</a> -
<a href="#error-handler">#errorHandler()</a> -
<a href="#flash">#flash</a> -
<a href="#namespace">#namespace</a> -
<a href="#navigate">#navigate()</a> -
<a href="#notify">#notify()</a> -
<a href="#mount">#mount()</a> -
<a href="#params">#params</a> -
<a href="#query">#query</a> -
<a href="#redirect-to">#redirectTo</a> -
<a href="#resource">#resource</a> -
<a href="#route-for">#routeFor()</a> -
<a href="#show">#show()</a> -
<a href="#start">#start()</a> -
<a href="#stop">#stop()</a> -
<a href="#vars">#vars</a></p>

<p><a class="anchor" id="action"></a></p>

<h3 id="action:b440f93c1d3adda104fcdb9ed5aa5063">#action</h3>

<p>This property holds the <em>action name</em> of the current route.</p>

<h4 id="example:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.many('articles');
});
router.navigate('articles/123/edit');
console.log(router.action); // =&gt; &quot;edit&quot;
</code></pre>

<p><a class="anchor" id="attach"></a></p>

<h3 id="attach:b440f93c1d3adda104fcdb9ed5aa5063">#attach()</h3>

<h4 id="usage:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>attach(component)</strong></li>
</ul>

<p>This method register the <em>component</em> as the target of <em>notification</em> from this router.</p>

<p>See <a href="#notify">#notify()</a> for details.</p>

<p><a class="anchor" id="before-navigation"></a></p>

<h3 id="beforenavigation:b440f93c1d3adda104fcdb9ed5aa5063">#beforeNavigation()</h3>

<p>See <a href="../../router/#before-navigation-callbacks">Before-Navigation Callbacks</a>.</p>

<p><a class="anchor" id="component"></a></p>

<h3 id="component:b440f93c1d3adda104fcdb9ed5aa5063">#component</h3>

<p>This property holds the <em>component name</em> of the current route in lower case.</p>

<h4 id="example-1:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.many('articles');
  m.namespace('admin', function(m) {
    m.many('articles');
  });
});
router.navigate('articles/123/edit');
console.log(router.component); // =&gt; &quot;edit&quot;
router.navigate('admin/articles/123/edit');
console.log(router.component); // =&gt; &quot;edit&quot;
</code></pre>

<p><a class="anchor" id="container"></a></p>

<h3 id="container:b440f93c1d3adda104fcdb9ed5aa5063">#container</h3>

<p>This property holds the <em>container name</em> of the current route in lower case.</p>

<h4 id="example-2:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.many('articles');
  m.namespace('admin', function(m) {
    m.many('articles');
  });
});
router.navigate('articles/123/edit');
console.log(router.container); // =&gt; &quot;articles&quot;
router.navigate('admin/articles/123/edit');
console.log(router.container); // =&gt; &quot;admin.articles&quot;
</code></pre>

<p><a class="anchor" id="detach"></a></p>

<h3 id="detach:b440f93c1d3adda104fcdb9ed5aa5063">#detach()</h3>

<h4 id="usage-1:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>detach(component)</strong></li>
</ul>

<p>This method removes the <em>component</em> from the list of targets of <em>notification</em> from this router.</p>

<p>See <a href="#notify">#notify()</a> for details.</p>

<p><a class="anchor" id="draw"></a></p>

<h3 id="draw:b440f93c1d3adda104fcdb9ed5aa5063">#draw()</h3>

<h4 id="usage-2:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>draw(function)</strong></li>
</ul>

<p>This method specify a function that takes a <code>RoutingMapper</code> object and defines routes.</p>

<h4 id="example-3:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.root('dashboard');
  m.page('about', 'docs.about');
  m.many('articles');
})
</code></pre>

<p>In the above example, the argument <code>m</code> is a <code>RoutingMapper</code> object.</p>

<p><a class="anchor" id="error-handler"></a></p>

<h3 id="errorhandler:b440f93c1d3adda104fcdb9ed5aa5063">#errorHandler()</h3>

<p>See <a href="../../router/#before-navigation-callbacks">Before-Navigation Callbacks</a>.</p>

<p><a class="anchor" id="flash"></a></p>

<h3 id="flash:b440f93c1d3adda104fcdb9ed5aa5063">#flash</h3>

<h4 id="usage-3:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>flash[key] = value</strong></li>
<li><strong>flash.key = value</strong></li>
</ul>

<p>Set an arbitrary value (object, string, integer, etc.) to the <em>flash</em> object,
which is emptied after each navigation.</p>

<h4 id="example-4:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">router.flash.alert = 'The specified article has been deleted.';
router.navigate('articles');
</code></pre>

<p><a class="anchor" id="namespace"></a></p>

<h3 id="container-1:b440f93c1d3adda104fcdb9ed5aa5063">#container</h3>

<p>This property holds the <em>namespace</em> of the current route in lower case.</p>

<h4 id="example-5:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.many('articles');
  m.namespace('admin', function(m) {
    m.many('articles');
  });
});
router.navigate('articles/123/edit');
console.log(router.namespace); // =&gt; null
router.navigate('admin/articles/123/edit');
console.log(router.namespace); // =&gt; &quot;admin&quot;
</code></pre>

<p><a class="anchor" id="navigate"></a></p>

<h3 id="navigate:b440f93c1d3adda104fcdb9ed5aa5063">#navigate()</h3>

<h4 id="usage-4:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>navigate(hash)</strong></li>
</ul>

<p>This method sets the anchor part (begins with a <code>#</code> symbol) of the browser&rsquo;s current URL to <em>hash.</em></p>

<p>When before-navigation callbacks are registered, they are executed
before changing the anchor part of URL.
If the before-navigation callbacks select other string for <em>hash</em>,
it will be set to the anchor part of the browser&rsquo;s current URL.</p>

<p>After setting the anchor part of URL, this method choose a component
according to the routing table.</p>

<p>When this component is different from the component which is mounted currently,
it unmounts the latter and mounts the former.
When this component is same with the component mounted currently
it calls the <code>#refresh</code> method of mounted component.</p>

<p>Lastly, the <code>#notify()</code> method is executed.</p>

<p>If you don&rsquo;t want the <code>#notify()</code> method to be executed, use <a href="#show">#show()</a> instead.</p>

<p><a class="anchor" id="notify"></a></p>

<h3 id="notify:b440f93c1d3adda104fcdb9ed5aa5063">#notify()</h3>

<h4 id="usage-5:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>notify()</strong></li>
</ul>

<p>This method triggars the <em>notification</em> process, which calls the <code>#refresh()</code> method
of all components registerd as targets of <em>notification</em> of this data store.</p>

<p>Eventually, each target component executes its <code>#render()</code> method,
which has to be defined by developers.</p>

<p>The <code>#notify()</code> method is executed after each time the <a href="#navigate">#navigate()</a> method is called.</p>

<p><a class="anchor" id="mount"></a></p>

<h3 id="mount:b440f93c1d3adda104fcdb9ed5aa5063">#mount()</h3>

<h4 id="usage-6:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>mount(id)</strong></li>
</ul>

<p>This method specifies the <code>id</code> of the HTML element which this router
inserts the components into.</p>

<h4 id="example-6:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-html">&lt;div&gt;
  &lt;a href=&quot;#&quot;&gt;Top&lt;/a&gt;
  &lt;a href=&quot;#about&quot;&gt;About&lt;/a&gt;
  &lt;a href=&quot;#help&quot;&gt;Help&lt;/a&gt;
&lt;/div&gt;

&lt;div id=&quot;main&quot;&gt;&lt;/div&gt;

&lt;script&gt;
var router = new Cape.Router();
router.draw(function(m) {
  m.root('top_page');
  m.page('about', 'about_page');
  m.page('help', 'help_page');
})
router.mount('main');
&lt;/script&gt;
</code></pre>

<p>In the example above, components are mounted into the <code>&lt;div&gt;</code> element whose <code>id</code> is <code>'main'</code>.</p>

<p><a class="anchor" id="params"></a></p>

<h3 id="params:b440f93c1d3adda104fcdb9ed5aa5063">#params</h3>

<p>This property holds a set of key-value pairs, which represents the parameters
embedded in the main part (before the first &lsquo;?&rsquo; symbol) of hash.</p>

<h4 id="example-7:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.page('help/:name', 'help.item');
  m.many('articles', function(m) {
    m.many('comments');
  });
})
router.navigate('help/password');
// router.params.name === 'password'
router.navigate('articles/123')
// router.params.id === '123'
router.navigate('articles/123/comments/7')
// router.params.article_id === '123'
// router.params.id === '7'
</code></pre>

<p><a class="anchor" id="query"></a></p>

<h3 id="query:b440f93c1d3adda104fcdb9ed5aa5063">#query</h3>

<p>This property holds a set of key-value pairs, which represents the parameters
embedded in the query part (after the first &lsquo;?&rsquo; symbol) of hash .</p>

<h4 id="example-8:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.many('articles')
})
router.navigate('articles')
// router.query === {}
router.navigate('articles?page=2')
// router.query.page === '2'
router.navigate('articles?page=2&amp;deleted')
// router.query.page === '2'
// router.query.deleted === ''
</code></pre>

<p><a class="anchor" id="redirect-to"></a></p>

<h3 id="redirectto:b440f93c1d3adda104fcdb9ed5aa5063">#redirectTo()</h3>

<p>This method sets the anchor part (begins with a <code>#</code> symbol) of the browser&rsquo;s current URL to <em>hash.</em></p>

<p>Unlike <a href="#navigate">#navigate()</a> method, before-navigationi callbacks are <em>not</em> executed
before changing the anchor part of URL.</p>

<p>After setting the anchor part of URL, this method choose a component
according to the routing table.</p>

<p>When this component is different from the component mounted currently,
it unmounts the latter and mounts the former.
When this component is same with the component which is mounted currently
it calls the <code>#refresh</code> method of the mounted component.</p>

<p>Lastly, the <code>#notify()</code> method is executed.</p>

<p><a class="anchor" id="resource"></a></p>

<h3 id="resource:b440f93c1d3adda104fcdb9ed5aa5063">#resource</h3>

<p>This property holds the <em>resource name</em> of the current route in lower case.</p>

<h4 id="example-9:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.one('account');
  m.many('articles', function(m) {
    m.many('comments');
  });
  m.namespace('admin', function(m) {
    m.many('articles');
  });
});
router.navigate('account/edit');
console.log(router.resource); // =&gt; &quot;account&quot;
router.navigate('articles/123/edit');
console.log(router.resource); // =&gt; &quot;articles&quot;
router.navigate('articles/123/comments');
console.log(router.resource); // =&gt; &quot;articles/comments&quot;
router.navigate('admin/articles/123/edit');
console.log(router.resource); // =&gt; &quot;articles&quot;
</code></pre>

<p><a class="anchor" id="route-for"></a></p>

<h3 id="routefor:b440f93c1d3adda104fcdb9ed5aa5063">#routeFor()</h3>

<h4 id="usage-7:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>routeFor(hash)</strong></li>
</ul>

<p>This method returns the first route matching to the <em>hash,</em> if any.</p>

<h4 id="example-10:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">var router = new Cape.Router();
router.draw(function(m) {
  m.namespace('admin', function(m) {
    m.many('articles');
  });
});
var route = router.routeFor('admin/articles/123/edit');
</code></pre>

<p><a class="anchor" id="show"></a></p>

<h3 id="show:b440f93c1d3adda104fcdb9ed5aa5063">#show()</h3>

<h4 id="usage-8:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>show(componentClass)</strong></li>
</ul>

<p>This method mounts an instance of <em>componentClass</em> class.</p>

<p>Unlike <a href="#navigate">#navigate()</a>, it does neither change the anchor part of
current URL, nor call the <a href="#notify">#notify()</a> method.</p>

<p><a class="anchor" id="start"></a></p>

<h3 id="start:b440f93c1d3adda104fcdb9ed5aa5063">#start()</h3>

<p>With this method call, routers begin to listen to <code>hashchange</code> events.</p>

<p><a class="anchor" id="stop"></a></p>

<h3 id="stop:b440f93c1d3adda104fcdb9ed5aa5063">#stop()</h3>

<p>With this method call, routers stop to listen to <code>hashchange</code> events.</p>

<p><a class="anchor" id="vars"></a></p>

<h3 id="vars:b440f93c1d3adda104fcdb9ed5aa5063">#vars</h3>

<h4 id="usage-9:b440f93c1d3adda104fcdb9ed5aa5063">Usage</h4>

<ul>
<li><strong>vars[key] = value</strong></li>
<li><strong>vars.key = value</strong></li>
</ul>

<p>Set an arbitrary value (object, string, integer, etc.) to the <em>vars</em> object.</p>

<h4 id="example-11:b440f93c1d3adda104fcdb9ed5aa5063">Example</h4>

<pre><code class="language-javascript">router.vars.signedIn = Date.now();
router.vars.currentUser = { id: 99, name: 'john', privileged: true };
</code></pre>

        </div>
      </article>
    </div>
  </div>
</div>

<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="http://oiax.github.io/capejs/js/bootstrap.min.js"></script>
<script src="http://oiax.github.io/capejs/js/scripts.js"></script>
<script src="http://oiax.github.io/capejs/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<div id="footer-sm" class="footer navbar-fixed-bottom">
  <div>Copyright &copy; 2015 <a href="http://www.oiax.jp/">Oiax, Inc.</a> and contributors.</div>
</div>
<div id="footer-xs" class="footer">
  <div>Copyright &copy; 2015 <a href="http://www.oiax.jp/">Oiax, Inc.</a> and contributors.</div>
</div>

</body>
</html>
